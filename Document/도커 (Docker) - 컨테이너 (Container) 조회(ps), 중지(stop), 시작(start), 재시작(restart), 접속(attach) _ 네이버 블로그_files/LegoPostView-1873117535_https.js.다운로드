var tagNameValidator={restrictedTagChars:/[\x25\x26\x2b\x3c\x3e\x3f\x2f\x5c\x27\x22\x3d\n]|(\x5c\x6e)/g,maxTagLength:100,isTagname:function(a){if(!a){return false}return a.match(this.restrictedTagChars)==null},isOverMaxLength:function(a){return a.length>this.maxTagLength}};var contentsTagLinker=(function(){var a=function(h){if(!document.querySelectorAll){return}var j=document.querySelectorAll("span.__se3tag");for(var e=0;e<j.length;e++){var k=j[e];var b=k.innerText;var g=b.replace(/#/g,"");var c="";if(!tagNameValidator.isTagname(g)){continue}if(tagNameValidator.isOverMaxLength(g)){c=g.substr(tagNameValidator.maxTagLength);g=g.substr(0,tagNameValidator.maxTagLength)}var d=g.match(/[\s]/);if(d!=null){c=g.substr(d.index)+c;g=g.substr(0,d.index)}var f=h(g,k.innerHTML);k.replaceChild(f,k.childNodes[0]);if(c!=""){k.appendChild(document.createTextNode(c))}}};return{bindTagLinkOnContents:a}})();var ImgAndVideoHandler=$Class({_nPostCtPadding:40,_elPostCt:null,_aImgList:null,_aVideoList:null,_nDelayTime:0,_isLargestThumbnailImgShown:false,_bIsLandscapeModeHappened:false,$init:function(a,b){this._setDelayTime();this.reset();this.fnPageResizer=a;this.isInApp=b;this.oPhtoViewerHandler=new PhotoViewerHandler()},_setDelayTime:function(){var a=$Agent().os();if(a.ios){return}if(a.android){if(a.version=="4.0.4"){this._nDelayTime=200}return}this._nDelayTime=200},reset:function(b){var a=b?b._element:window;this._elPostCt=$$.getSingle(".post_ct",a);this._aImgList=$$("._inl",a);this._aVideoList=$$("._vnl",a);this._isLargestThumbnailImgShown=false;this._bIsLandscapeModeHappened=false;return this},load:function(){this._loadImage();this._loadVideo();if(!this.isInApp){$Fn(this.showPhotoViewer,this).attach(document,"click")}},resize:function(){setTimeout(function(){this._loadImage()}.bind(this),this._nDelayTime)},_loadImage:function(){if(this._isNotNecessaryToResizeImg()){return}if(window.orientation==90||window.orientation==-90){this._bIsLandscapeModeHappened=true}var c=this._getImgSizeInfo();for(var b=0;b<this._aImgList.length;b++){var f=document.createElement("img");var e=this._aImgList[b];var a=e.getAttribute("thumburl");var d=$Element(e).parent();var g=true;if(d){g=(d.tag!="a")}f.setAttribute("src",a+c);f.setAttribute("largeSrc","javascript:location.href='"+a+"w2'");$Element(f).attach("load",this.fnPageResizer);if(g){$Element(f).addClass("_postImage")}e.innerHTML="";e.appendChild(f);$Element(e).removeClass("_inl")}},_getImgSizeInfo:function(){var a=this._elPostCt.offsetWidth-this._nPostCtPadding;if(a<=210){return"w210"}else{if(a>210&&a<=420){return"w420"}else{this._isLargestThumbnailImgShown=true;return"w2"}}},_isNotNecessaryToResizeImg:function(){if(this._aImgList.length==0){return true}if(this._isLargestThumbnailImgShown){return true}if(this._bIsLandscapeModeHappened){return true}return false},_loadVideo:function(){if(this._aVideoList.length==0){return}var f=this._getVideoSizeInfo();for(var a=0;a<this._aVideoList.length;a++){var b=this._aVideoList[a];var d=$$.getSingle("iframe",b);var e=b.getAttribute("outKeyMode")=="true"?true:false;var c=ugcVideoPlayer(b.getAttribute("vid"),{value:b.getAttribute("key"),outKeyMode:e},f.width,f.height);c.properties.playerType="html5";c.properties.hasLink=b.getAttribute("hasLink")=="true"?true:false;b.innerHTML=c.getVideoIframeTag();$Element(b).removeClass("_vnl")}},_getVideoSizeInfo:function(){var b={width:0,height:0};var a=this._elPostCt.offsetWidth-this._nPostCtPadding;if(a<320){b.width=280;b.height=158}else{if(a>=320&&a<336){b.width=320;b.height=180}else{if(a>=336&&a<360){b.width=336;b.height=189}else{if(a>=360&&a<768){b.width=360;b.height=203}else{b.width=768;b.height=432}}}}return b},showPhotoViewer:function(c){var d=c.element;var a=$Element(d);if(a.tag=="img"&&a.hasClass("_postImage")){var b=a.attr("src");this.oPhtoViewerHandler.showPhotoViewer(b)}},loadOnError:function(){this._loadImageOnError();this._loadVideoOnError()},_loadImageOnError:function(){var c=$$("._inl");if(c.length==0){return}for(var b=0;b<c.length;b++){var e=document.createElement("img");var d=this._aImgList[b];var a=d.getAttribute("thumburl");e.setAttribute("src",a+"w420");e.setAttribute("onclick","javascript:location.href='"+a+"w2'");d.innerHTML="";d.appendChild(e);$Element(d).removeClass("_inl")}},_loadVideoOnError:function(){var f=$$("._vnl");if(f.length==0){return}for(var a=0;a<f.length;a++){var b=this._aVideoList[a];var d=$$.getSingle("iframe",b);var e=b.getAttribute("outKeyMode")=="true"?true:false;var c=ugcVideoPlayer(b.getAttribute("vid"),{value:b.getAttribute("key"),outKeyMode:e},280,158);c.properties.playerType="html5";b.innerHTML=c.getVideoIframeTag();$Element(b).removeClass("_vnl")}}});var RecentPostListViewController=$Class({$init:function(){this._elPostCt=$$.getSingle(".post_ct");if(!this._elPostCt){return}if(exposeRecentPostList&&!isTabletRelatedPostListExposeTarget){this._isTabletLoading=false;this._loadRecentPostList();this._setOrientationChangeEvent()}if(exposeRecentRelatedPostList&&!isRelatedPostListExposeTarget){this._loadRecentRelatedPost()}},_setOrientationChangeEvent:function(){var a="onorientationchange" in window?"orientationchange":"resize";$Fn(function(){this._loadRecentPostList()},this).attach(window,a)},_isNotTablet:function(){if(this._elPostCt.offsetWidth<708){return true}if(window.innerWidth<1024&&window.outerHeight<1024&&!(window.innerWidth>=768&&window.outerHeight==window.innerHeight)){return true}if(window.innerHeight>window.innerWidth){return true}return false},_loadRecentRelatedPost:function(){var a=$("_post_property");var b=$Ajax("/rego/RecentRelatedPostListAsyncTpl.nhn",{onload:$Fn(function(h){var g=$Json(h.json()).toObject();if(g.result===undefined||g.result.replace(/(\r\n|\n|\r)/gm,"")===""){return}this._createFragmentAndAppendDiv(g.result,"_recentPostList");var f=$Element($$.getSingle("#_recentPostList"));if(f){f.attr("style","");var e=document.getElementById("_related_scroll_area");var j=new IScroll(e,{scrollX:true,scrollY:false,keyBindings:true,preventDefault:true,eventPassthrough:"vertical",bounce:true});function c(m){var l=document.getElementById("_related_scroll_area_ul").offsetWidth;var n=l-e.offsetWidth;var k=m.offsetLeft;if(n<=k){k=n}else{if(k!=0){k=k-20}}j.scrollTo(k*-1,0,1000)}var d=document.getElementById("related_post_selected");c(d)}EndPageExposeRecordHandler.initOther("RECENT_POST_LIST")},this).bind()});b.request({blogId:blogId,categoryNo:gnCategoryNo,logNo:gLogNo,logCode:a.getAttribute("logType")})},_loadRecentPostList:function(){if(this._isNotTablet()){return}if(this._isTabletLoading){return}this._isTabletLoading=true;var a=$("_post_property");var b=$Ajax("/rego/RecentPostListAsyncTpl.nhn",{onload:$Fn(function(d){var c=$Json(d.json()).toObject();if(c.result===undefined||c.result.replace(/(\r\n|\n|\r)/gm,"")===""){return}this._createFragmentAndAppendDiv(c.result,"_recentPostListTablet");EndPageExposeRecordHandler.initOther("RECENT_POST_LIST")},this).bind()});b.request({blogId:blogId,categoryNo:gnCategoryNo,logNo:gLogNo,logCode:a.getAttribute("logType")})},_createFragmentAndAppendDiv:function(e,b){var d=$(b);if(!d){return}var c=document.createDocumentFragment();var a=document.createElement("div");a.innerHTML=e;while(a.firstChild){c.appendChild(a.firstChild)}d.appendChild(c)}});var EndPageExposeRecordHandler={RECOMMENDATION_TYPE_NAME:{KEYWORD_SEARCH:"KEYWORD_SEARCH",KOREA_MAP:"KOREA_MAP",FOREIGN_MAP:"FOREIGN_MAP",WRITING_MATERIAL:"WRITING_MATERIAL",TAG:"TAG",BLOG_TAG:"BLOG_TAG",DIRECTOR_POST:"DIRECTOR_POST",BLOG_OG_LINK:"BLOG_OG_LINK",LIKE_IT:"LIKE_IT",POPULAR_POST:"POPULAR_POST"},EXPOSE_TYPE:{POST_RECOMMEND:{typeName:"",areaClassName:"._watchPostRecommend",isSendUserExposeRecord:false},AD_POST:{typeName:"AD_POST",areaClassName:"._watchAdPost",isSendUserExposeRecord:false},NAVER_POST:{typeName:"NAVER_POST",areaClassName:"._watchNaverPost",isSendUserExposeRecord:false},RECENT_POST_LIST:{typeName:"RECENT_POST_LIST",areaClassName:"._watchRecentPostList",isSendUserExposeRecord:false}},initPostRecommend:function(a){if(this._isInValid()){return}if(this._isRecommendationTypeNotExist(a)){return}var b=this.EXPOSE_TYPE.POST_RECOMMEND;b.typeName=a;if(this._isElementNotExist(b.areaClassName)){return}this._sendExposeRecordAndAttachEvent(b)},initOther:function(a){if(this._isInValid()){return}var b=this.EXPOSE_TYPE[a];if(!b){return}if(this._isElementNotExist(b.areaClassName)){return}this._sendExposeRecordAndAttachEvent(b)},_isInValid:function(){return !isPostViewExposeCheck},_isElementNotExist:function(b){var a=$$.getSingle(b);if(!a){return true}return false},_isRecommendationTypeNotExist:function(a){for(var b in this.RECOMMENDATION_TYPE_NAME){if(b===a){return false}}return true},_sendExposeRecordAndAttachEvent:function(a){this._exposeRecord(a.typeName);this._setUserExposeRecordEvent(a)},_setUserExposeRecordEvent:function(f){if(this._isShow(f.areaClassName)){this._userExposeRecord(f);return}var d=$$.getSingle(".ct_wrap");if(!d){return}var b=this;var e=function(g){var h=g.scrollTop;setTimeout(function(){var j=g.scrollTop;if(j!=h){return}if(!b._isShow(f.areaClassName)){return}b._userExposeRecord(f);document.removeEventListener("scroll",c);d.removeEventListener("scroll",a)},200)};var c=function(){e(document.body)};var a=function(){e(d)};document.addEventListener("scroll",c);d.addEventListener("scroll",a)},_isShow:function(b){var a=$$.getSingle(b);var c=a.getBoundingClientRect();var d=document.body.clientHeight-(a.clientHeight/2);if(c.top<d){return true}return false},_exposeRecord:function(a){var b=$Ajax("/rego/EndPageExposeRecordAsync.nhn",{method:"post",async:false});b.request({typeName:a})},_userExposeRecord:function(a){if(a.isSendUserExposeRecord){return}a.isSendUserExposeRecord=true;var b=$Ajax("/rego/EndPageUserExposeRecordAsync.nhn",{method:"post",async:false});b.request({typeName:a.typeName})},};var eprClick={on:function(a){if(!isPostViewExposeCheck){return}var b=EndPageExposeRecordHandler.EXPOSE_TYPE[a];if(!b){return}var c=$Ajax("/rego/EndPageClickRecordAsync.nhn",{method:"post",async:false});c.request({typeName:b.typeName})}};var EndPagePostRecommendController=$Class({$init:function(){this._endPagePostRecommendArea=$("_endPagePostRecommendArea");if(!this._endPagePostRecommendArea){return}if(exposeRecommend){this._loadEndPagePostRecommend();this.isLoadingRecommendPostList=false}},_setPostRecommendView:function(){this._endPagePostRecommendList=$("_endPagePostRecommendList");this.postRecommendView={recommendationType:this._endPagePostRecommendList.getAttribute("data-recommendation-type"),totalCount:parseInt(this._endPagePostRecommendList.getAttribute("data-total-count")),currentPage:parseInt(this._endPagePostRecommendList.getAttribute("data-current-page")),countPerPage:parseInt(this._endPagePostRecommendList.getAttribute("data-count-per-page")),directorySeq:parseInt(this._endPagePostRecommendList.getAttribute("data-directory-seq")),loadFinishPage:1,isShowMoreButton:function(){return this.totalCount>this.currentPage*this.countPerPage},isLoadMoreRecommendPostList:function(){return this.currentPage+1>this.loadFinishPage},startIndex:function(){return(this.currentPage-1)*this.countPerPage},endIndex:function(){if(this.totalCount<this.currentPage*this.countPerPage){return this.totalCount-1}return(this.currentPage*this.countPerPage)-1},hasNext:function(){return this.currentPage<Math.ceil(this.totalCount/this.countPerPage)},hasPrev:function(){return this.currentPage>1}}},_getFragment:function(c){var b=document.createDocumentFragment();var a=document.createElement("div");a.innerHTML=c;while(a.firstChild){b.appendChild(a.firstChild)}return b},_setPostViewLink:function(d){var g=d.querySelectorAll("._endPagePostViewLink");for(var e=0;e<g.length;e++){var b=g[e];var f=b.getAttribute("data-blog-id");var c=b.getAttribute("data-log-no");var a="/PostView.nhn?blogId="+f+"&logNo="+c+"&targetKeyword="+targetKeyword+"&targetRecommendationCode="+targetRecommendationCode;b.setAttribute("href",a)}},_resetRecommendPostListNavButton:function(){if(this.postRecommendView.hasNext()){this._activateRecommendPostListNavButton("btn_next")}else{this._deactivateRecommendPostListNavButton("btn_next")}if(this.postRecommendView.hasPrev()){this._activateRecommendPostListNavButton("btn_prev")}else{this._deactivateRecommendPostListNavButton("btn_prev")}},_activateRecommendPostListNavButton:function(b){var a=$Element("_recommendPostListPagingBtnArea");if(!a){return}a.query("a."+b).$value().style.display="";a.query("span."+b).$value().style.display="none"},_deactivateRecommendPostListNavButton:function(b){var a=$Element("_recommendPostListPagingBtnArea");if(!a){return}a.query("a."+b).$value().style.display="none";a.query("span."+b).$value().style.display=""},_setPagingBtnLink:function(){var b=this;var a=$Element($$.getSingle("._prev_recommend_post_list_btn"));if(a){a.attach("click",function(){b._loadPrevRecommendPostList()}.bind(this))}var c=$Element($$.getSingle("._next_recommend_post_list_btn"));if(c){c.attach("click",function(){b._loadNextRecommendPostList()}.bind(this))}},_loadPrevRecommendPostList:function(){if(this.isLoadingRecommendPostList){return}this.isLoadingRecommendPostList=true;this._showAndHideRecommendPostList(false);this.postRecommendView.currentPage-=1;this._showAndHideRecommendPostList(true);this._resetRecommendPostListNavButton();this.isLoadingRecommendPostList=false},_loadNextRecommendPostList:function(){if(this.isLoadingRecommendPostList){return}this.isLoadingRecommendPostList=true;if(this.postRecommendView.recommendationType==="DIRECTOR_POST"&&this.postRecommendView.isLoadMoreRecommendPostList()){this._loadDirectoryPostRecommend()}else{this._showAndHideRecommendPostList(false);this.postRecommendView.currentPage+=1;this._showAndHideRecommendPostList(true);this._resetRecommendPostListNavButton();this.isLoadingRecommendPostList=false}},_showAndHideRecommendPostList:function(b){var c="none";if(b){c="block"}var a=$("rp_"+this.postRecommendView.currentPage);a.style.display=c},_loadEndPagePostRecommend:function(){var a=function(d){var e=$Json(d.json()).toObject();if(e.result===undefined||e.result.replace(/(\r\n|\n|\r)/gm,"")===""){return}var c=this._getFragment(e.result);this._endPagePostRecommendArea.parentNode.insertBefore(c,this._endPagePostRecommendArea.nextSibling);this._setPostRecommendView();this._setPagingBtnLink();this._resetRecommendPostListNavButton();EndPageExposeRecordHandler.initPostRecommend(this.postRecommendView.recommendationType)};var b=$Ajax("/rego/EndPagePostRecommendAsync.nhn",{async:true,timout:3,onload:$Fn(a,this).bind()});b.request({blogId:targetBlogId,logNo:targetLogNo,excludeLogNo:targetExcludeLogNo,recommendationCode:targetRecommendationCode,keyword:targetKeyword,inAppYn:isInApp})},_setShowMoreButton:function(){var a=$("_endPagePostRecommendShowMoreBtn");if(!a){return}jindo.$Fn(this._loadMoreEndPagePostRecommend,this).attach(a,"click")},_loadMoreEndPagePostRecommend:function(){var c=this.postRecommendView;c.currentPage+=1;if(c.recommendationType==="DIRECTOR_POST"){this._loadDirectoryPostRecommend()}else{var f=c.startIndex();var e=c.endIndex();for(var d=f;d<=e;d++){var b=$("rp_"+d);b.style.display="block"}}var a=$("_endPagePostRecommendShowMoreBtn");if(!c.isShowMoreButton()){a.remove()}},_loadKeywordSearchPostRecommend:function(){var b=function(e){var f=$Json(e.json()).toObject();if(f.result===undefined||f.result.replace(/(\r\n|\n|\r)/gm,"")===""){return}var d=this._getFragment(f.result);this._setPostViewLink(d);this._endPagePostRecommendList.appendChild(d)};var c=$Ajax("/rego/KeywordSearchPostRecommendAsync.nhn",{onload:$Fn(b,this).bind()});var a=this.postRecommendView;c.request({blogId:targetBlogId,currentPage:a.currentPage,keyword:targetKeyword,excludeLogNo:targetExcludeLogNo})},_loadDirectoryPostRecommend:function(){var b=this.postRecommendView.currentPage+1;var a=this.postRecommendView;var c=function(f){var g=$Json(f.json()).toObject();if(g.result===undefined||g.result.replace(/(\r\n|\n|\r)/gm,"")===""){this.isLoadingRecommendPostList=false;return}var e=this._getFragment(g.result);this._setPostViewLink(e);this._endPagePostRecommendList.appendChild(e);if(b>this.postRecommendView.loadFinishPage){this.postRecommendView.loadFinishPage=b}this._showAndHideRecommendPostList(false);this.postRecommendView.currentPage+=1;this._showAndHideRecommendPostList(true);this._resetRecommendPostListNavButton();this.isLoadingRecommendPostList=false};var d=$Ajax("/rego/DirectoryPostRecommendAsync.nhn",{onload:$Fn(c,this).bind()});d.request({blogId:targetBlogId,currentPage:b,directorySeq:a.directorySeq,excludeLogNo:targetExcludeLogNo})}});var EndPagePostRecommendFlickingController=$Class({$init:function(){this._endPagePostRecommendArea=$("_endPagePostRecommendArea");if(!this._endPagePostRecommendArea){return}if(exposeRecommend){this._initEndPagePostRecommend()}},_setPostRecommendView:function(){var a=this;this._endPagePostRecommendList=$("_recommendFlickingScroll");this.postRecommendView={recommendationType:this._endPagePostRecommendList.getAttribute("data-recommendation-type"),totalCount:parseInt(this._endPagePostRecommendList.getAttribute("data-total-count")),currentPage:parseInt(this._endPagePostRecommendList.getAttribute("data-current-page")),countPerPage:parseInt(this._endPagePostRecommendList.getAttribute("data-count-per-page")),directorySeq:parseInt(this._endPagePostRecommendList.getAttribute("data-directory-seq")),isAsyncLoadType:function(){return this.recommendationType=="DIRECTOR_POST"},totalLoadPage:function(){if(this.isAsyncLoadType()){return this.currentPage}else{return Math.ceil(this.totalCount/this.countPerPage)}},hasNext:function(){return a.recommendPostListCarouselScroll.currentPage.pageX+1<Math.ceil(this.totalCount/this.countPerPage)},hasPrev:function(){return a.recommendPostListCarouselScroll.currentPage.pageX+1>1}}},_getFragment:function(c){var b=document.createDocumentFragment();var a=document.createElement("div");a.innerHTML=c;while(a.firstChild){b.appendChild(a.firstChild)}return b},_setPostViewLink:function(d){var g=d.querySelectorAll("._endPagePostViewLink");for(var e=0;e<g.length;e++){var b=g[e];var f=b.getAttribute("data-blog-id");var c=b.getAttribute("data-log-no");var a="/PostView.nhn?blogId="+f+"&logNo="+c+"&targetKeyword="+targetKeyword+"&targetRecommendationCode="+targetRecommendationCode;b.setAttribute("href",a)}},_resetRecommendPostListNavButton:function(){if(this.postRecommendView.hasNext()){this._activateRecommendPostListNavButton("btn_next")}else{this._deactivateRecommendPostListNavButton("btn_next")}if(this.postRecommendView.hasPrev()){this._activateRecommendPostListNavButton("btn_prev")}else{this._deactivateRecommendPostListNavButton("btn_prev")}},_activateRecommendPostListNavButton:function(b){var a=$Element("_recommendPostListPagingBtnArea");if(!a){return}a.query("a."+b).$value().style.display="";a.query("span."+b).$value().style.display="none"},_deactivateRecommendPostListNavButton:function(b){var a=$Element("_recommendPostListPagingBtnArea");if(!a){return}a.query("a."+b).$value().style.display="none";a.query("span."+b).$value().style.display=""},_setPagingBtnLink:function(){var b=this;var a=$Element($$.getSingle("._prev_recommend_post_list_btn"));if(a){a.attach("click",function(){b._loadPrevRecommendPostList()}.bind(this))}var c=$Element($$.getSingle("._next_recommend_post_list_btn"));if(c){c.attach("click",function(){b._loadNextRecommendPostList()}.bind(this))}},_lock:function(){if(this.recommendPostListCarouselScroll.isInTransition){return true}if(this.isLoadingRecommendPostList){return true}this.isLoadingRecommendPostList=true;return false},_unlock:function(){this.isLoadingRecommendPostList=false},_loadPrevRecommendPostList:function(){var a=this;if(a._lock()){return}a._resizeWidthAndRefresh();a.recommendPostListCarouselScroll.prev();a._resetRecommendPostListNavButton();a._unlock()},_loadNextRecommendPostList:function(){var a=this;if(a._lock()){return}var b=function(){a._resizeWidthAndRefresh();a.recommendPostListCarouselScroll.next();a._resetRecommendPostListNavButton();a._unlock()};if(a.isFirstAsyncLoading&&a.postRecommendView.isAsyncLoadType()){a.isFirstAsyncLoading=false;if(a.isAsyncLock){return}a.isAsyncLock=true;a._preloadNextRecommendCategoryPostList(false,function(){b();a.isAsyncLock=false})}else{b()}},_initRecommendCarousel:function(){var a=this;a.isFirstAsyncLoading=true;a.isLoadingRecommendPostList=false;a.isAsyncLock=false;a.recommendPostListCarouselScroll=new IScroll(document.getElementById("_recommendFlickingContainer"),{scrollX:true,scrollY:false,momentum:false,snapThreshold:0.2,snap:true,snapSpeed:400,keyBindings:false,preventDefault:true,eventPassthrough:"vertical",resizePolling:0});a.recommendPostListCarouselScroll.on("beforeScrollStart",function(){if(a.isFirstAsyncLoading&&a.postRecommendView.isAsyncLoadType()){a.isFirstAsyncLoading=false;if(a._lock()){return}if(!a.isAsyncLock){a.isAsyncLock=true;a._preloadNextRecommendCategoryPostList(false,function(){a._unlock();a.isAsyncLock=false})}}else{a._preloadCarousel()}});a.recommendPostListCarouselScroll.on("scrollEnd",function(){a._preloadCarousel()});$Element(window).attach("resize",function(){setTimeout(function(){a._resizeElement(false);a.recommendPostListCarouselScroll.refresh()}.bind(a),0)}.bind(a))},_preloadCarousel:function(){var a=this;if(a._lock()){return}var b=function(){a._resizeElement(false);a._resetRecommendPostListNavButton();a._unlock()};if(a.recommendPostListCarouselScroll.x==0){a.recommendPostListCarouselScroll.goToPage(0,0,0)}else{if(a.recommendPostListCarouselScroll.x==a.recommendPostListCarouselScroll.maxScrollX){a.recommendPostListCarouselScroll.goToPage(a.recommendPostListCarouselScroll.pages.length-1,0,0)}}if(a.recommendPostListCarouselScroll.pages.length==a.recommendPostListCarouselScroll.currentPage.pageX+1&&a.postRecommendView.isAsyncLoadType()){if(a.isAsyncLock){return}a.isAsyncLock=true;a._preloadNextRecommendCategoryPostList(true,function(){b();a.isAsyncLock=false})}else{b()}},_initEndPagePostRecommend:function(){var b=this;var a=function(e){var f=$Json(e.json()).toObject();if(f.result===undefined||f.result.replace(/(\r\n|\n|\r)/gm,"")===""){return}var d=b._getFragment(f.result);b._endPagePostRecommendArea.parentNode.insertBefore(d,b._endPagePostRecommendArea.nextSibling);b.elContainer=$Element($$.getSingle("#_recommendFlickingContainer"));b.elScroll=$Element($$.getSingle("#_recommendFlickingScroll"));b._setPostRecommendView();b._setPagingBtnLink();b._resizeElement(true);b._initRecommendCarousel();b._resizeElement(false);b._resetRecommendPostListNavButton();b.recommendPostListCarouselScroll.refresh();EndPageExposeRecordHandler.initPostRecommend(b.postRecommendView.recommendationType)};var c=$Ajax("/rego/EndPagePostRecommendAsync.nhn",{async:true,timout:3,onload:$Fn(a,this).bind()});c.request({blogId:targetBlogId,logNo:targetLogNo,excludeLogNo:targetExcludeLogNo,recommendationCode:targetRecommendationCode,keyword:targetKeyword,inAppYn:isInApp})},_preloadNextRecommendCategoryPostList:function(d,g){var c=this;if(!c.postRecommendView.hasNext()){if(g){g()}return}var b=c.postRecommendView.currentPage+1;var a=c.postRecommendView;var e=function(j){var k=$Json(j.json()).toObject();if(k.result===undefined||k.result.replace(/(\r\n|\n|\r)/gm,"")===""){c.isLoadingRecommendPostList=false;return}var h=c._getFragment(k.result);c._setPostViewLink(h);h.querySelector("._recommend_category_post_list").style["float"]="left";c._endPagePostRecommendList.appendChild(h);c.postRecommendView.currentPage+=1;c._resizeElement(false);c.recommendPostListCarouselScroll.refresh();if(g){g()}};var f=$Ajax("/rego/DirectoryPostRecommendAsync.nhn",{async:d,onload:$Fn(e,this).bind()});f.request({blogId:targetBlogId,currentPage:b,directorySeq:a.directorySeq,excludeLogNo:targetExcludeLogNo})},_resizeElement:function(f){var d=this.elContainer.width();var a=0;var b="#_recommendPostListFlickingPage_0";if(!f){b="#_recommendPostListFlickingPage_"+this.recommendPostListCarouselScroll.currentPage.pageX}var c=$ElementList(b+" li");for(var e=0;e<c.length();e++){a+=c.get(e).height()}$ElementList("ul._recommend_category_post_list").css({width:d+"px","float":"left"});this.elScroll.width(d*this.postRecommendView.totalLoadPage());this.elScroll.height(a);this.elContainer.height(a)},_resizeWidthAndRefresh:function(){if(this.postRecommendView.isAsyncLoadType()){var a=this.elContainer.width()*this.postRecommendView.totalLoadPage();this.elScroll.width(a);this.recommendPostListCarouselScroll.refresh()}},resize:function(){this._resizeElement(false)}});var SocialPluginHandler=$Class({$init:function(a){this.libUrl=a},start:function(e){var j="naver-splugin-sdk",b=new Date(),h=b.getFullYear(),g=b.getMonth()+1,a=b.getDate();var c=document.createElement("script");c.id=j;c.type="text/javascript",c.charset="utf-8",c.async=false;c.src=(this.libUrl+h+(g<10?"0"+g:g)+(a<10?"0"+a:a));var f=document.getElementsByTagName("head")[0];f.appendChild(c,f);$Fn(function(){this.draw(e)},this).attach(c,"load")},draw:function(c){initData=this._getInitData();var a=function(e){return e?"on":"off"};initData.title=c.title;initData.tags.push(c.blogName);initData.me.display=a(c.meDisplay);if(c.meDisplay){initData.me.fCallback=function(){buddyController.doSubscribe()}}initData.line.display=a(c.lineDisplay);var b=a(c.outsideDisplay);initData.facebook.display=b;initData.twitter.display=b;initData.yozm.display=b;initData.mail.display=b;initData.post.display=b;initData.pholar.display=b;initData.disco.display=b;initData.kakaostory.display=b;initData.kakaotalk.display=b;if(c.outsideDisplay){initData.facebook.serviceUrl=c.source;initData.mail.srvid="blog";initData.mail.srvurl="http://bookmark.naver.com/getRichMailTmpl.ajax?sourceUrl="+encodeURIComponent(c.source)}initData.cafe.display=a(c.cafeDisplay);if(c.cafeDisplay){initData.cafe.proxyUrl=gUrlMap.ScrapToCafe+"?inAppNavigation=true&blogId="+c.blogId+"&logNo="+c.logNo}else{initData.cafe.display="off"}initData.blog.display=a(c.blogDisplay);if(c.blogDisplay){initData.blog.blogId=c.blogId;initData.blog.proxyUrl=gUrlMap.ScrapToBlog+"?loadOnModalView=true&template=modal&isShowingGnb=false&blogId="+c.blogId+"&logNo="+c.logNo}if(isInApp){initData.calendar.display="off"}window.splugin_oninitialize=function(){return initData};var d=function(){if(checkReadOnly()){return}};window.__splugin=SocialPlugIn_Core({evKey:"blog",serviceName:"블로그",sourceName:c.blogName,dimmed:"fixed"})},_getInitData:function(){return{source:"",me2key:"",tags:["네이버블로그"],me:{display:"",fCallback:"",feedInfo:"블로거의 글이"},line:{display:""},me2post:{display:"off"},me2day:{display:"off"},facebook:{display:"",sourceUrl:""},twitter:{display:""},yozm:{display:""},post:{display:""},pholar:{display:""},mail:{display:"",srvid:"",srvurl:""},cafe:{display:"",proxyUrl:""},blog:{display:"",proxyUrl:""},calendar:{display:""},disco:{display:""},kakaotalk:{display:""},kakaostory:{display:""}}}});var BuddyController=$Class({$init:function(a){this.sBlogId=a;this.bUseModal=gMCA.inAppYn||gMCA.mobileBrowser.androidBrowser},start:function(){this._bindEvent();this.oBothBuddyValidator=new BothBuddyValidator()},_bindEvent:function(){$Fn(this.doClick,this).attach($("ct"),"click");$Fn(this.doClick,this).attach($$("._buddyRecommendationLayer"),"click")},doClick:function(b){var a=b.getEventElement();var c=paramUtil.getParam(a.className());if(a.hasClass("_add_buddy")){if(a.attr("isBlackUser")=="true"){alertLayer("상대방이 이웃 관계를 제한하여,이웃/서로이웃을 신청하실 수 없습니다")}else{if(bLoginUser==false){confirmLayer("로그인하시겠습니까?",function(){if(typeof(postViewController)!=="undefined"&&navigator.userAgent.indexOf("NAVER")>-1&&$Element($$.getSingle("._buddyRecommendationLayer")).css("display")==="block"){postViewController.timerStop()}loginUtil.login()})}else{this._goBuddyAdd(c)}}}if(a.hasClass("_returnFalse")){b.stop()}},doSubscribe:function(){var a={};a[0]=this.sBlogId;this._subscribe(a)},_subscribe:function(a){var b=((a==null||a[0]==null)?"":a[0]);if(this.bUseModal){SubmitUtil.submit("/BlogSubscription.nhn",{blogId:blogId,isShowingGnb:false,template:"modal",loadOnModalView:true},"GET")}else{SubmitUtil.submit("/BlogSubscription.nhn",{blogId:blogId,isShowingGnb:false},"POST")}},_goBuddyAdd:function(e){var f=((e==null||e[0]==null)?"":e[0]);var b=((e==null||e[1]==null)?"":e[1]);var a=((e==null||e[2]==null)?"":e[2]);var d=((e==null||e[4]==null)?"":e[4]);var c={};c.blogId=f;c.mobileBuddyAddMessageType=a;c.url=e[3];c.subDirectoryKey=d;this.goBuddyAddForm(c)},goBuddyAddForm:function(c){var f=c.blogId;var a=c.mobileBuddyAddMessageType;var e=c.url;var b=c.subDirectoryKey;var d=e+"?blogId="+f+"&returnUrl="+encodeURIComponent(encodeURIComponent(location.href))+"&loadOnModalView=true&template=modal&isShowingGnb=false";if(a!=null){d+="&mobileBuddyAddMessageType="+a}if(b!=null){d+="&subDirectoryKey="+b}this.oBothBuddyValidator.validateBothBuddy(d,f)}});var SE3Initializer=function(n){var s=gMCA.inAppYn;var c=gMCA.isAndroidApp;var r=n.fAfterVideoLoad;var p={};var l=false;var d=0;var j=new PhotoViewerHandler();var e=function(u,t){var v=t.target;switch(u.searchEngine){case"NAVER":var w=m(u);$Element(v).attr("href",w);break;case"GOOGLE":if(c){$Element(v).attr("target","")}v.href="https://www.google.com/maps/search/?api=1&query="+encodeURIComponent(u.title)+"&query_place_id="+u.locationId;break;default:t.preventDefault()}};var m=function(t){if(!t.searchType||!t.locationId){return"http://m.map.naver.com/?mapmode=0&pinType=site&enc=&title="+t.title+"&lat="+t.latitude+"&lng="+t.longitude}switch(t.eventTarget){case"placeDesc":return"https://m.store.naver.com/places/detail?id="+t.locationId+"&source=blog";break;case"button":return"https://m.store.naver.com/places/detailMap?id="+t.locationId;break}};var k={savedFileNameFromUrl:function(u){var t=u.split("/");return"/"+t[4]+"/"+t[5]+"/"},isPunishedFile:function(t){return t.punishType!=0},isMaliciousFile:function(t){return t.maliciousCodeYn=="true"},isLicenseViolationFile:function(t){return t.ahfLicenseYn=="true"}};var a=function(w,v){var t=w.link;var y=k.savedFileNameFromUrl(t);var z=v.target;var x=(z&&z.tagName=="A")?$Element(z):$Element(z).query("!a.__se_link");if(!x){return}if(c){x.attr("target","")}var u=p[y];if(!u){return}if(l){t=t.replace("naver.net","naver.com")}if(k.isPunishedFile(u)){var A=u.punishType;if(A==1){alertMessage="저작권이 있는 파일입니다. \r\n실행하시겠습니까?\r\n허락없이 저작물을 공유하는 것은\r\n저작권 침해가 될 수 있습니다."}else{if(A==2){alertMessage="서비스 이용약관 및 운영원칙에 의해 \r\n이용제한 된 파일입니다. 실행하시겠습니까?\r\n* 이 파일은 본인에게만 표시됩니다."}else{if(A==3){alertMessage="다른 이용자의 게시중단 요청으로\r\n차단된 파일입니다. 실행하시겠습니까?"}else{if(A==4){alertMessage="저작권자의 요청으로 차단된 파일입니다.\r\n실행하시겠습니까?"}}}}v.preventDefault();confirmLayer(alertMessage,function(){location.href=t})}else{if(k.isMaliciousFile(u)){alertLayer("파일에 악성코드가 포함되어 있어\r\n실행이 제한됩니다.");v.preventDefault()}else{if(k.isLicenseViolationFile(u)){v.preventDefault();confirmLayer("저작권이 있는 파일입니다. \r\n실행하시겠습니까?\r\n허락없이 저작물을 공유하는 것은\r\n저작권 침해가 될 수 있습니다.",function(){location.href=t})}else{if(!l){return}x.attr("href",t)}}}};var f=function(t){r()};var h=function(x,v){if(s){if(gbAndroidApp){var u=parseInt(inAppVersion,10);if(u<=100){alertLayer("해당 스티커는 블로그앱 업데이트 후 이용 가능합니다.");return}}else{if(gbIOSApp){var t=parseInt(inAppVersion.split(".")[0],10);var w=parseInt(inAppVersion.split(".")[1],10);var y=parseInt(inAppVersion.split(".")[2],10);if((t<3)||(t==3&&w<2)||(t==3&&w==2&&y<=6)){alertLayer("해당 스티커는 블로그앱 업데이트 후 이용 가능합니다.");return}}}window.open(gfMarketUrl+"/sticker/detail/code/"+x.packCode,"_blank")}else{window.open(gfMarketUrl+"/sticker/detail/code/"+x.packCode,"_blank")}};var b=function(v,t){var w=v.link;if(v.linkUse=="true"&&w){if(nil&&nil.send_sa_log){w=nil.send_sa_log(w)}window.open(w);return}var u;if(s){if(t.target.tagName==="IMG"){u=t.target.src}else{u=v.src}postViewInAppUtil.deliverySliderViewInApp(u)}else{j.showPhotoViewer(v.src)}};var g=function(v,u){if(!v.link){return}var t=v.link;if(nil&&nil.send_sa_log){t=nil.send_sa_log(t)}window.open(t,"_blank");return};var q=function(){se.module.changeDocFontSize(d);se.module.bindLoadCompEvent("all",r);se.module.onEventByType("v1_oglink",{onLoadOglink:f});se.module.onLinkResolver({sticker:{isStop:true,callback:h},img:{isStop:true,callback:b},map:{isStop:false,callback:e},file:{isStop:false,callback:a},link:{isStop:true,callback:g}})};var o=function(t){try{if(typeof SE_INIT=="undefined"){return}if(t.htAttachFilePunishInfo){p=t.htAttachFilePunishInfo}l=t.isBlogOwner?t.isBlogOwner:false;d=t.fontSize?t.fontSize:0;moduleInjectionData=t.moduleInjectionData;SE_INIT({SERVICE_ID:"blog",fAfterLoad:q,MODULE_INJECTION_DATA:moduleInjectionData,IMAGE_THUMBNAIL_TYPE:"w800"})}catch(u){if(console){console.log(u)}}};return{init:o}};var BothBuddyValidator=$Class({$init:function(){this._getBothBuddyValidateUrl="/rego/LegacyBuddyOrBothBuddyAddValidationAsync.nhn";this._getBothBuddyRequestCancelUrl="/rego/LegacyBothBuddyInviteCancelAsync.nhn"},validateBothBuddy:function(a,c){var b=this._getBothBuddyValidateUrl;var e={blogId:c};var d=false;var f=$Ajax(b,{async:false,onload:$Fn(function(h){var g=$Json(h.json()).toObject();if(g.isValid){d=true;return}if(g.isProgressingInviteBuddy){this._cancelBothBuddyRequest(g.message,c);return}if(g.isAlreadyBuddy){d=true;return}alertLayer(g.message)},this).bind()});f.request(e);if(d){location.href=a}},_cancelBothBuddyRequest:function(d,b){if(!confirm(d)){return}var a=this._getBothBuddyRequestCancelUrl;var c={blogId:b};var e=$Ajax(a,{onload:$Fn(function(g){var f=$Json(g.json()).toObject();if(f.isValid){alert("서로이웃 신청을 취소하였습니다.");return}alert(f.message)},this).bind()});e.request(c)}});var ThumbnailScrollHandler=$Class({$init:function(a){this.baseEl=null;this.targetElClass=null;this.transformType=this._getTransformType();this.captureMove=false;this.fCM=null;this._clickCallback=a;this.bStartFromThumb=false;this.oLazyImgHandler=new LazyImgHandler()},start:function(c,b,a){if(this.baseEl!=null){this._detachEvent()}if(typeof c=="undefined"||c==null){return}else{if(typeof c=="string"&&$(c)!=null){this.baseEl=$(c)}else{this.baseEl=c}}this.targetElClass=b;this.depth=a;$Fn(this._onTouchStart,this).attach(this.baseEl,"touchstart");$Fn(this._onTouchMove,this).attach(this.baseEl,"touchmove");$Fn(this._onTouchEnd,this).attach(this.baseEl,"touchend")},resetPosition:function(a){a.first().$value().style[this.transformType]="translate3d(0px, 0px, 0px)"},_detachEvent:function(){var a=$Element(this.baseEl);a.detach("touchstart",this._onTouchStart);a.detach("touchmove",this._onTouchMove);a.detach("touchend",this._onTouchEnd)},_getTransformType:function(){var b=document.body.style;var c=["transform","WebkitTransform","MozTransform","msTransform","OTransform"];for(var a=0;a<c.length;a++){if(b[c[a]]!=undefined){return c[a]}}return null},_onTouchStart:function(b){var a=b.getEventElement("div",this.targetElClass,this.depth);if(a.hasClass(this.targetElClass)){b.stopBubble();var c=b.$value().changedTouches[0];this.lastX=parseInt(c.clientX);this.lastPoint={clientX:c.clientX,clientY:c.clientY};if(typeof gbAndroidApp!="undefined"&&gbAndroidApp){Android.tabFlickingView()}this.fCM=setInterval(function(){this.captureMove=true}.bind(this),40);this.bStartFromThumb=true}this.isTouch=true},_onTouchMove:function(m){var b=m.getEventElement("div",this.targetElClass,this.depth);if(b.hasClass(this.targetElClass)&&this.bStartFromThumb){this.isTouch=false;var h=b.first();var l=h.width()-b.width();if(l<=0){return}var k=m.$value().changedTouches[0];if(this._isVerticalScroll(this.lastPoint,k)){return}m.stopBubble();m.stopDefault();if(this.captureMove!=true){return}this.captureMove=false;var e=parseInt(k.clientX);var c=e-this.lastX;this.lastX=e;if(this.transformType){var f=this._getNum(h.$value().style[this.transformType]);var j=(+f+ +c);if(j>0){h.$value().style[this.transformType]="translate3d(0px, 0px, 0px)"}else{if(j+l<0){h.$value().style[this.transformType]="translate3d(-"+l+"px, 0px, 0px)"}else{h.$value().style[this.transformType]="translate3d("+j+"px, 0px, 0px)"}}}else{var a=b.offset();var g=h.offset();var d=g.left+c;if(d>a.left){h.offset(g.top,a.left);return}else{if(l<a.left-d){h.offset(g.top,a.left-l);return}}h.offset(g.top,g.left+c)}this.oLazyImgHandler.processTouch(m)}},_onTouchEnd:function(b){var a=b.getEventElement("div",this.targetElClass,this.depth);if(this.fCM!=null){clearInterval(this.fCM)}if(a.hasClass(this.targetElClass)){if(isInApp==true){return}b.stopBubble()}var a=b.getEventElement("a");if(this.bStartFromThumb){this.bStartFromThumb=false}},_getNum:function(a){var b=/translate3d\((-?\d+)px, 0px, 0px\)/i.exec(a);if(b&&b.length>1){return b[1]}else{return 0}},_isVerticalScroll:function(d,a){var c=parseInt(d.clientX);var b=parseInt(d.clientY);var f=parseInt(a.clientX);var e=parseInt(a.clientY);return Math.abs(f-c)<=(Math.abs(e-b)*0.7)}});var LazyImgHandler=function(){var f=function(o){if(o==null){return false}if(!$Element(o).visible()){return false}var p=o.getBoundingClientRect();var s=document.documentElement;var r=p.top;var n=p.bottom;var q=p.left;var m=+(window.innerHeight||s.clientHeight);var l=+(window.innerWidth||s.clientWidth);return((r>=0-200&&r<=+m*1.3)||(n>0&&n<=+m)||(r<=0&&n>=+m))&&(q>=0&&q<=l)};var h=function(m){var l=m.srcElement;setTimeout(function(){$Element(l).detach("load",h)},300)};var j=function(l){if(l.className.indexOf("_lazy")<0){return}l.className="";var m=l.getAttribute("datasrc");$Element(l).attach("load",h);l.src=m};var d=function(n,m){var l=0;while(l++<20){if(n==null){break}if(n&&n.tagName=="DIV"&&$Element(n).hasClass(m)){return n}n=n.parentNode}return null};var k=function(){var l=document.documentElement;return(window.pageYOffset||l.scrollTop)-(l.clientTop||0)};var e=function(n){var o=n.querySelectorAll("img._lazy");for(var m=0;m<o.length;m++){var l=o[m];if(f(l)){j(l)}}};var a=function(){var l=document.documentElement;return(window.pageYOffset||l.scrollTop)-(l.clientTop||0)};var g=false;var c=function(){var l=a();setTimeout(function(){if(g==true){return}if(l!=a()){return}g=true;var n=1;if(document.elementFromPoint(100,window.innerHeight+10)!=null){n=window.devicePixelRatio}var o=document.elementFromPoint(100,120*n);var m=d(o,"_lisb");if(m==null){var p=d(document.elementFromPoint(100,(window.innerHeight-50)*n),"flick-ct");if(p){m=$$.getSingle("._lisb",p)}if(m==null){g=false;return}}while(f(m)){e(m);m=m.nextElementSibling;if(m==null){break}}g=false},30)};var b=function(n){var m=n.srcElement;var l=d(m,"_ThumbScrollArea");if(l==null){return}e(l)};return{start:function(l){c();$Element(document).attach("scroll",c)},refresh:function(){c()},processTouch:function(l){b(l)}}};var PostViewController=$Class({_APPSTORE_MAP:"http://itunes.apple.com/app/id311867728?mt=8",_NAVERMAPLIBURL:"",$init:function(l,c,a,m,b,g,f,e,h,k,j,d){this.oSE3Initializer=SE3Initializer({isInApp:isInApp,fAfterVideoLoad:$Fn(function(){this._lazyViewLoad()},this).bind()});if(isInApp){postViewInAppUtil.deliveryPostInfoInApp()}this._hideNaverAppBottomBar();this._isSendTabletClickCode=false;this._isLoadingCategory=false;this._msgTimeout="요청한 시간이 초과되었습니다.\n다시 시도해주세요.";this._msgServerError="서버와의 연결이 끊어졌습니다.\n다시 시도해주세요.";this.fontSizeStep=$Cookie().get(CookieHolder.MOBILE_POST_VIEW_FONT_SIZE_TYPE.KEY);if(this.fontSizeStep==null||!(!isNaN(parseFloat(this.fontSizeStep))&&isFinite(this.fontSizeStep))){this.fontSizeStep=2}this.se3FontSize=$Cookie().get(CookieHolder.MOBILE_SE3_POST_VIEW_FONT_SIZE_TYPE.KEY);if(this.se3FontSize==null||!(!isNaN(parseFloat(this.se3FontSize))&&isFinite(this.se3FontSize))){this.se3FontSize=0}this.oNaverMapUtil=new NaverMapUtil();this.oSocialPluginHandler=new SocialPluginHandler(g);this.oImgAndVideoHandler=new ImgAndVideoHandler($Fn(this._lazyViewLoadForImageFocus,this).bind(),isInApp);this.oBuddyRecommendHandler=new BuddyRecommendHandler();this.oOpenGraphLinkVideoExecutor=OpenGraphLinkVideoExecutor($Fn(this._lazyViewLoad,this).bind());this.oNoticePostHandler=new NoticePostHandler();this.elPostArea=$("_post_area");this.sUserId=b;this.sBlockType;this.bBlacklistUser;this.bOnContentLoading=false;this._NAVERMAPLIBURL=f;this.bNaverMapLibLoaded=false;this.sIsFromList=e;this.nLastCategoryNo=h;this.isNilAnalystLeaveEvent=d;this.sSearchKeyword=decodeURIComponent(k);this.nSearchPageNo=j;this._checkAndShowBlogTeamRecommendLayer();this._oPostViewVisitRecord=new PostViewVisitRecord();this.oPostViewVisitRecordHandler=new PostViewVisitRecordHandler(blogId,c,this._oPostViewVisitRecord);this.oNaverTranslationHandler=new NaverTranslationHandler();this.sNavType=a;this.sBlogId=l;this.sLogNo=c;this.elFloat=$Element($$.getSingle(".floating_menu"));this.userInteractionSection=$$.getSingle(".section_t1");this.postCt=$$.getSingle(".post_ct");this.ctWrap=$$.getSingle(".ct_wrap");this._setShowAndHideFloatingDependsScroll();this._setShowAndHideNgnbDependScroll();this._setTopScrollBtn();this._sendTabletClickCode();this._setOrientationChangeEvent();this.queryString=location.search;this.sympathyAnimationStartTime=0;this.beforeScrollTopPosition=0;this.imageCode=null},_isTabletFn:function(){if(!this.postCt){return}if(this.postCt.offsetWidth<708){return false}if(window.innerWidth<1024&&window.outerHeight<1024&&!(window.innerWidth>=768&&window.outerHeight==window.innerHeight)){return false}if(window.innerHeight>window.innerWidth){return false}return true},iosInAppScrollHandler:function(){var c=this.elFloat;var b=this.userInteractionSection;if(c&&b){var d=b.offsetTop+b.clientHeight;var f=window.innerHeight+window.scrollY;if(f>d){c.addClass("on")}else{c.removeClass("on");c.attr("style","")}if(f-this.beforeScrollTopPosition<0&&c.hasClass("on")){c.attr("style","display : none")}var a=this.ctWrap;if(this._isTabletFn()&&a){f=window.innerHeight+a.scrollTop;if(f>d){c.attr("style","display : none")}}this.beforeScrollTopPosition=f}var e=this.elAnimationLike;if(e){if(this.sympathyAnimationStartTime!=0&&e.hasClass("on")&&new Date().getTime()-this.sympathyAnimationStartTime>1000){e.removeClass("on")}}},_hideNaverAppBottomBar:function(){if(!this._isNaverApp()){return}try{var c=document.createElement("iframe");var a=-200;c.style.display="none";c.src="naverapp://floatingtoolbar?bottomMargin="+a;document.documentElement.appendChild(c);window.naverAppFloatingToolBarBottomMargin=a}catch(b){}},_isNaverApp:function(){return navigator.userAgent.match(/NAVER\(inapp; search;/g)||navigator.userAgent.match(/NAVER\(higgs; search;/g)},_setTopScrollBtn:function(){var b=$Element($$.getSingle(".btn_top"));if(!b){return}var a=$$.getSingle(".ct_wrap");if(!a){return}jindo.$Fn(function(){var c=window.scrollY;if(c===0){a.scrollTop=0}else{window.scrollTo(0,0)}},this).attach(b,"click")},_setShowAndHideNgnbDependScroll:function(){this.elNgnb=$Element($$.getSingle(".Ngnb"));if(!this.elNgnb){return}this.elNgnbMinimumRange=50;this.elNgnbVerticalPoint=window.scrollY;var b;var a=this;var c=function(e,f){if(e<0||f||(Math.abs(e-a.elNgnbVerticalPoint)<a.elNgnbMinimumRange)){return}else{if(e<a.elNgnbVerticalPoint){clearTimeout(b);b=setTimeout(function(){a.elNgnb.removeClass("on")},10)}else{if(e>a.elNgnbVerticalPoint){clearTimeout(b);b=setTimeout(function(){a.elNgnb.addClass("on")},10)}else{return}}}a.elNgnbVerticalPoint=e};jindo.$Fn(function(){var e=window.scrollY;var f=(window.innerHeight+e)>document.body.scrollHeight;c(window.scrollY,f)},this).attach(window,"scroll");var d=$$.getSingle(".ct_wrap");if(d){jindo.$Fn(function(h){var f=h.srcElement.scrollTop;var g=(h.srcElement.clientHeight+f)>h.srcElement.scrollHeight;c(f,g)},this).attach(d,"scroll")}},_setShowAndHideFloatingDependsScroll:function(){if(!this.elFloat||!this.userInteractionSection||!this.postCt){return}var a=this;document.addEventListener("scroll",function(c){var b=function(e){var d=a.userInteractionSection.offsetTop+a.userInteractionSection.clientHeight;if(e>d){a.elFloat.addClass("on")}else{a.elFloat.removeClass("on");a.elFloat.attr("style","")}};b(window.innerHeight+window.scrollY)},true)},_sendTabletClickCode:function(){if(this._isSendTabletClickCode){return}if(this._isTabletFn()){nclk(this,"psp.rotate","","");this._isSendTabletClickCode=true}},_setOrientationChangeEvent:function(){var a="onorientationchange" in window?"orientationchange":"resize";$Fn(function(){setTimeout(function(){this._sendTabletClickCode()}.bind(this),300)},this).attach(window,a)},_checkAndShowBlogTeamRecommendLayer:function(){try{if(!gbIsAfterWrite){return}new BlogTeamBuddyRecommendHandler()}catch(a){}},_currentPost:{},_getCurrentPost:function(){return this._currentPost},_getContainerElement:function(){return $Element("ct")},start:function(){this._populatePostProperty(this._getContainerElement());this._bindTagLinkOnContents();this._loadTag();this._lazyViewLoad();this.oSocialPluginHandler.start(JSON.parse(this._getContainerElement().query(".social_plugin_property").text()));this.oImgAndVideoHandler.load();this._setCommonEvent();this._resizeMusicIframe();this.oOpenGraphLinkVideoExecutor.init();if(this._getCurrentPost()["editorVersion"]=="3"||this._getCurrentPost()["editorVersion"]=="1"){if(this.imageCode){var a=this.findFocusingTarget(this.imageCode);this.scrollToTarget(a)}}if(this._getCurrentPost()["editorVersion"]=="3"){this.oSE3Initializer.init({htAttachFilePunishInfo:this._getCurrentPost()["attachFilePunishInfo"],isBlogOwner:this.sUserId==this._getCurrentPost()["blogId"],fontSize:this.se3FontSize,moduleInjectionData:this._getCurrentModuleInjectionData()})}this._adjustFontSizeModifyButton(this._getCurrentPost()["editorVersion"]);if(isInApp){this._setInAppEvent();this._startInApp()}else{this._setHeaderEvent();this._setHistoryState();this._setMobileWebEvent();this._addScrollToWideContent(this._getContainerElement().query(".post_ct"));var b=this._getCurrentPost()}this._setHandlerPollIframe();$Fn(function(){this._resizeMusicIframe();this._lazyViewLoad()},this).attach(this._getContainerElement().queryAll("iframe"),"load");$Fn(function(){this._lazyViewLoad()},this).attach(this._getContainerElement().queryAll("img"),"load");new RecentPostListViewController();if(isPostViewEnableFlicking){this.oEndPagePostRecommendFlickingController=new EndPagePostRecommendFlickingController();this.oRelatedPostListFlickingController=new RelatedPostListFlickingController(this._getCurrentPost())}else{this.oEndPagePostRecommendFlickingController=new EndPagePostRecommendController();this.oRelatedPostListFlickingController=new RelatedPostListController(this._getCurrentPost())}EndPageExposeRecordHandler.initOther("NAVER_POST");EndPageExposeRecordHandler.initOther("AD_POST")},sendVisitTime:function(g,e,b){if(g){var f=this._getCurrentPost();var c=f.relationTypeWithBlog;if(c==1||c==2){var d=b;var a=e;this._oPostViewVisitTimeRecord=new PostViewVisitTimeRecord();this.oPostViewVisitTimeRecordHandler=new PostViewVisitTimeRecordHandler(d,a,this._oPostViewVisitTimeRecord);this.oPostViewVisitTimeRecordHandler.sendVisitTime()}}},sympathyEvent:function(c,b,a){if(!b){return}if(!a||!(a.resultStatusCode==0||a.resultStatusCode==2003)){return}this._sympathyAnimation(c);this._sympathyMoreBtnShowAndHide(c,a.contents);this._sympathyBtnAnimation(c)},_sympathyAnimation:function(b){this.elAnimationLike=$Element($$.getSingle(".animation_like"));if(!this.elAnimationLike){return}if(b){this.sympathyAnimationStartTime=new Date().getTime();this.elAnimationLike.addClass("on");var a=this;setTimeout(function(){a.sympathyAnimationStartTime=0;a.elAnimationLike.removeClass("on")},1000)}},_sympathyBtnAnimation:function(d){var b=$Element($$.getSingle("body")).queryAll("._sympathyBtn");for(var c=0;c<b.length;c++){var a=b[c];if(d){a.addClass("on")}else{a.removeClass("on")}}},_sympathyMoreBtnShowAndHide:function(b,d){var c=true;if(!b){if(!d){return}if(d.likeItCount==0){c=false}}var f=$Element($$.getSingle("body")).queryAll(".btn_like_more");for(var a=0;a<f.length;a++){var e=f[a];if(c){e.show()}else{e.hide()}}},_setHandlerPollIframe:function(){window.resizePollIframe=$Fn(function(){this._lazyViewLoad()},this).bind()},_setHeaderEvent:function(){$Fn(this._hideCategoryLayer,this).attach($$("._closeCategoryList"),"click");$Fn(function a(c){var b=c.getEventElement();if(b.hasClass("_cur_category")){this._showCategoryLayer();if($Element("_ul_categorylist").html()==""){if(!this._isLoadingCategory){this._setHeaderCategoryInfo()}}}},this).attach($("_categoryName"),"click")},_showCategoryLayer:function(){this._scrollY=document.documentElement.scrollTop||window.scrollY||window.pageYOffset;$Element("_div_categorylist").show();$Element("ct").hide()},_hideCategoryLayer:function(){$Element("_div_categorylist").hide();$Element("ct").show();setTimeout(function(){if(isPostViewEnableFlicking){this.oEndPagePostRecommendFlickingController.resize();this.oRelatedPostListFlickingController.resize()}window.scrollTo(0,this._scrollY)}.bind(this),100)},_setHeaderCategoryInfo:function(){this._isLoadingCategory=true;var a=gUrlMap.PostCategoryListAsync;var b=this._getCurrentPost();var c=$Ajax(a,{onload:$Fn(function(e){var d=$Json(e.json()).toObject();if(d.result){$Element("_ul_categorylist").html(d.result);$Element("_category_"+b.categoryNo).addClass("on");this._isLoadingCategory=false}},this).bind(),timeout:3,ontimeout:$Fn(function(f){var d=this;alertLayer(this._msgTimeout,function(){d._isLoadingCategory=false;d._hideCategoryLayer()})},this).bind(),onerror:$Fn(function(f){var d=this;alertLayer(this._msgServerError,function(){d._isLoadingCategory=false;d._hideCategoryLayer()})},this).bind()});c.request({blogId:b.blogId})},_startInApp:function(){$$(".fx",$("ct")).forEach(function(c,b,a){c.setAttribute("onclick","")})},_setHistoryState:function(){var a=this._getCurrentPost();var b=typeof gsPostTitle=="undefined"?"":gsPostTitle;if(history.replaceState&&this._hasNotMoreQueryParameter()){history.replaceState({logNo:a.logNo},b,"/"+a.blogId+"/"+a.logNo)}},_getQueryParameters:function(){var g={};var f=location.search;if(!f||f==""){return g}var e;e=f.substring(f.indexOf("?")+1,f.length);e=e.split("&");var c=e.length;var b,d;for(var a=0;a<c;a++){b=e[a].split("=")[0];d=e[a].split("=")[1];g[b]=d}return g},_hasNotMoreQueryParameter:function(){var a=this._getQueryParameters();for(var b in a){if(b!="blogId"&&b!="logNo"){return false}}return true},_setCommonEvent:function(){$Fn(this._clickOnContent,this).attach($("ct"),"click")},_setInAppEvent:function(){$Element(window).attach("resize",function(){setTimeout(function(){this._lazyViewLoad()}.bind(this),100)}.bind(this))},_setMobileWebEvent:function(){$Element(window).attach("resize",function(){setTimeout(function(){var d=this._getContainerElement().query(".post_ct");var c=d.queryAll("._contentScrollArea");for(var b=0;b<c.length;b++){var e=c[b];e.width(window.innerWidth-20);this.tsh.resetPosition(e)}this._lazyViewLoad()}.bind(this),100)}.bind(this));var a="onorientationchange" in window?"orientationchange":"resize";$Fn(this.oImgAndVideoHandler.resize,this.oImgAndVideoHandler).attach(window,a)},_createMapAppViewButtion:function(){},_clickOnContent:function(t){var d=t.element;var x=t.getEventElement();var o=paramUtil.getParam(x&&x.className()!=""?x.className():d.className);if(x.hasClass("_alertLicenseViolation")){var b=o[0];confirmLayer("저작권이 있는 파일입니다. \r\n실행하시겠습니까?\r\n허락없이 저작물을 공유하는 것은\r\n저작권 침해가 될 수 있습니다.",function(){window.open(b,"","")})}else{if(x.hasClass("_alertMaliciousCode")){alertLayer("파일에 악성코드가 포함되어 있어\r\n실행이 제한됩니다.")}else{if(x.hasClass("_alertPunish")){var r=o[0];var b=o[1];var c="";if(r==1){c="저작권이 있는 파일입니다. \r\n실행하시겠습니까?\r\n허락없이 저작물을 공유하는 것은\r\n저작권 침해가 될 수 있습니다."}else{if(r==2){c="서비스 이용약관 및 운영원칙에 의해 \r\n이용제한 된 파일입니다. 실행하시겠습니까?\r\n* 이 파일은 본인에게만 표시됩니다."}else{if(r==3){c="다른 이용자의 게시중단 요청으로\r\n차단된 파일입니다. 실행하시겠습니까?"}else{if(r==4){c="저작권자의 요청으로 차단된 파일입니다.\r\n실행하시겠습니까?"}}}}confirmLayer(c,function(){window.open(b,"","")})}else{if(x.hasClass("_naverMapAppLink")){var w=o[0];var m=o[1];if(m==""){document.location.href="http://m.map.naver.com/map.nhn?mid="+w}else{document.location.href="http://m.map.naver.com/viewer/map.nhn?pinId="+m+"&pinType=site"}}else{if(x.hasClass("_naverMapDialBtn")){var f=o[0];nclk(this,"amp.call","","");this.oNaverMapUtil.checkAndRequestDialNumber(f,x,this.sSearchKeyword)}else{if(x.hasClass("_naverMapLink")){var w=o[0];var f=o[1];nclk(this,"amp.map","","");this.oNaverMapUtil.goNaverMapLink(w,f)}else{if(x.hasClass("_naverMapDetailLink")){var w=o[0];var f=o[1];nclk(this,"amp.info","","");this.oNaverMapUtil.goNaverMapDetailLink(w,f)}else{if(x.hasClass("fx")){if(isInApp){postViewInAppUtil.deliverySliderViewInApp(x.attr("src"))}}else{if(x.hasClass("_telLink")){var a=o[0];if(document.images){var z=new Image();z.onerror=function(A){document.location=x.attr("href")};z.src=a;t.stop()}else{document.location=a}}else{if(x.hasClass("_comment_count")){var s=this._getCurrentPost();window.location.href=gUrlMap.CommentList+"?blogId="+s.blogId+"&logNo="+s.logNo}else{if(x.hasClass("_post_delete")){if(typeof checkReadOnly!="undefined"&&checkReadOnly()){return false}var n=this;confirmLayer("삭제된 포스트는 복구가 불가능합니다.\n포스트를 삭제 하시겠습니까?",function(){var A=n._getCurrentPost();SubmitUtil.submit(gUrlMap.PostDelete,{blogId:A.blogId,logNo:A.logNo,categoryNo:A.categoryNo},"post")})}else{if(x.hasClass("_btn_modify")){nclk(this,"pst.set","","");if(checkReadOnly()){return}SubmitUtil.submit(gInAppUrl+"/postModifyAndDelete",{},"get","")}else{if(x.hasClass("_btn_tools")){this.oNaverTranslationHandler.closeTransLayer();$Element("_tools_layer").toggle();if($Element("_tools_layer").visible()){window.scrollBy(0,-1)}}else{if(x.hasClass("_copy_url")){if(!isInApp){var g=document.location.href;prompt("아래의 URL을 길게 누르면 복사할 수 있습니다.",g)}else{SubmitUtil.submit(gInAppUrl+"/copyPostUrl",{},"get","")}}else{if(x.hasClass("_add_noticePost")){if(typeof checkReadOnly!="undefined"&&checkReadOnly()){return}this.oNoticePostHandler.add(o)}else{if(x.hasClass("_remove_noticePost")){if(typeof checkReadOnly!="undefined"&&checkReadOnly()){return}this.oNoticePostHandler.remove(o)}else{if(x.hasClass("_modify_post")){if(typeof checkReadOnly!="undefined"&&checkReadOnly()){return}var j=this._getContainerElement();var e=this._getCurrentPost();var q=e.logNo;if(isInApp&&gSeVersion==3){if(gbAndroidApp){var u=parseInt(inAppVersion,10);if(u<110){alertLayer("스마트에디터3.0 글은 블로그앱 업데이트 후 수정 가능합니다.");return}}else{if(gbIOSApp){var p=parseInt(inAppVersion.split(".")[0],10);var l=parseInt(inAppVersion.split(".")[1],10);var v=parseInt(inAppVersion.split(".")[2],10);if((p<3)||(p==3&&l<2)||(p==3&&l==2&&v<20)){alertLayer("스마트에디터3.0 글은 블로그앱 업데이트 후 수정 가능합니다.");return}}}}if(!isInApp){var y="수정하기";var k={};if(isScrapPost&&isWritedByMobileWeb){k=this._makeConfigureModifyLayer(y,"모바일 웹에서 스크랩한 글의 본문은 PC에서 수정할 수 있습니다.",q,x,false)}else{if(isScrapPost&&isWritedByApp){k=this._makeConfigureModifyLayer(y,"앱에서 스크랩한 글의 본문은 PC에서 수정할 수 있습니다.",q,x,false)}else{if(isScrapPost){k=this._makeConfigureModifyLayer(y,"PC에서 스크랩한 글의 본문은 PC에서 수정할 수 있습니다.",q,x,false)}else{if(isWritedByMobileWeb){k=this._makeAppOpenAndConfigureModifyLayer(y,"모바일 웹에서 작성한 글의 본문은 블로그앱 혹은 PC에서 수정할 수 있습니다.",q,x,false)}else{if(isWritedByApp){k=this._makeAppOpenAndConfigureModifyLayer(y,"모바일 웹에서 수정할 수 없는 게시글입니다. 본문은 PC에서 수정할 수 있습니다.",q,x,true)}else{k=this._makeConfigureModifyLayer(y,"PC에서 작성한 글의 본문은 PC에서 수정할 수 있습니다.",q,x,false)}}}}}popupLayer(k);return}else{if(isModifyOnApp&&gSeVersion<3){var k=this._makeConfigureModifyLayer("수정하기","PC에서 작성한 글의 본문은 PC에서 수정할 수 있습니다.",q,x,true);popupLayer(k);return}else{if(gbIOSApp&&isDontModifyAppVersion){alertLayer("현재 버전에서 글 수정 시 내용이 저장되지 않는 현상이 있어 다음 업데이트까지 수정이 불가능합니다. 곧 업데이트 될 예정이니 조금만 기다려주세요.");return}}if(isScrapPost&&gSeVersion<3){var y="수정하기";var k={};if(isWritedByMobileWeb){k=this._makeConfigureModifyLayer(y,"모바일웹에서 스크랩한 글은 PC에서 수정할 수 있습니다.",q,x,true)}else{if(isWritedByApp){k=this._makeConfigureModifyLayer(y,"앱에서 스크랩한 글의 본문은 PC에서 수정할 수 있습니다.",q,x,true)}else{k=this._makeConfigureModifyLayer(y,"PC에서 스크랩한 글의 본문은 PC에서 수정할 수 있습니다.",q,x,true)}}popupLayer(k);return}}var h=$("frmPostInfoForInApp");SubmitUtil.submit(gInAppUrl+"/PostView/postUpdateForm",{blogId:this._getCurrentPost().blogId,logNo:this._getCurrentPost().logNo,categoryNo:this._getCurrentPost().categoryNo,isEditableOnApp:h.isEditableOnApp.value},"get","")}else{if(x.hasClass("_smallFont")){if(this._getCurrentPost()["editorVersion"]=="3"){this._decreaseSe3FontSize()}else{this._decreaseFontSize(x)}}else{if(x.hasClass("_bigFont")){if(this._getCurrentPost()["editorVersion"]=="3"){this._increaseSe3FontSize()}else{this._increaseFontSize(x)}}else{if(x.hasClass("btn_help")){$Element("tag_lyr").toggle()}else{if(x.hasClass("tag_lyr_close")){$Element("tag_lyr").hide()}else{if(x.child()[0]&&x.child()[0].hasClass("_sticker_img")){if(isInApp){if(gbAndroidApp){var u=parseInt(inAppVersion,10);if(u<=100){alertLayer("해당 스티커는 블로그앱 업데이트 후 이용 가능합니다.");t.stop()}}else{if(gbIOSApp){var p=parseInt(inAppVersion.split(".")[0],10);var l=parseInt(inAppVersion.split(".")[1],10);var v=parseInt(inAppVersion.split(".")[2],10);if((p<3)||(p==3&&l<2)||(p==3&&l==2&&v<=6)){alertLayer("해당 스티커는 블로그앱 업데이트 후 이용 가능합니다.");t.stop()}}}}}else{if(x.hasClass("_goTrans")){nclk(this,"pst.ftranslate","","");this.oNaverTranslationHandler.goTrans()}}}}}}}}}}}}}}}}}}}}}}}this._hideToolsLayer(x);if(x.hasClass("_returnFalse")){t.stop()}},_makeAppOpenAndConfigureModifyLayer:function(e,d,g,a,f){var c=this;var b=gUrlMap.PostUpdateSetInfoForm+"?blogId="+blogId+"&logNo="+g+"&isScrap="+(isScrapPost?"true":"false");if(f){b=b+"&template=modal"}return{title:e,message:d,buttonList:[{title:"블로그앱 열기",className:"btn_100 green",action:function(){BlogAppLauncher.launchWithNaverAppstorLayer("postview","1",{logNo:[g],scheme:["postform"],version:["1"]},blogId)}},{title:"제목ㆍ공개여부 수정",className:"btn_100",action:function(){document.location.href=b}},{title:"취소",className:"btn_100",action:function(){c._hideToolsLayer(a)}}]}},_makeConfigureModifyLayer:function(e,d,g,a,f){var c=this;var b=gUrlMap.PostUpdateSetInfoForm+"?blogId="+blogId+"&logNo="+g+"&isScrap="+(isScrapPost?"true":"false");if(f){b=b+"&template=modal"}return{title:e,message:d,buttonList:[{title:"제목ㆍ공개여부 수정",className:"btn_100",action:function(){document.location.href=b}},{title:"취소",className:"btn_100",action:function(){c._hideToolsLayer(a)}}]}},_hideToolsLayer:function(a){if($Element("_tools_layer")&&!a.hasClass("_btn_tools")&&!a.hasClass("_bigFont")&&!a.hasClass("_smallFont")&&!a.hasClass("_btn_sympathy")&&!a.hasClass("_post_delete")&&!a.hasClass("u_likeit_list_btn")){$Element("_tools_layer").hide()}},_decreaseSe3FontSize:function(){if(this.se3FontSize==0){return}this.se3FontSize--;this._setSe3FontSize()},_increaseSe3FontSize:function(){if(this.se3FontSize==1){return}this.se3FontSize++;this._setSe3FontSize()},_setSe3FontSize:function(){se.module.changeDocFontSize(this.se3FontSize);this._adjustFontSizeModifyButton("3");$Cookie().set(CookieHolder.MOBILE_SE3_POST_VIEW_FONT_SIZE_TYPE.KEY,this.se3FontSize,CookieHolder.MOBILE_SE3_POST_VIEW_FONT_SIZE_TYPE.DURATION)},_decreaseFontSize:function(a){if(this.fontSizeStep<=1){$Element("moreSmall").addClass("off");this.fontSizeStep=1}else{$Element("moreBig").removeClass("off")}this._changeFontSize(this.fontSizeStep--,this.fontSizeStep)},_increaseFontSize:function(a){if(this.fontSizeStep>=3){$Element("moreBig").addClass("off");this.fontSizeStep=3}else{$Element("moreSmall").removeClass("off")}this._changeFontSize(this.fontSizeStep++,this.fontSizeStep)},_changeFontSize:function(d,c){var b=$Element("viewTypeSelector");var a=$Element("font_size");switch(c){case 0:a.addClass("font_s2");b.addClass("font_s2");this._setFontSize(c);break;case 1:a.addClass("font_s");b.addClass("font_s");this._setFontSize(c);break;case 2:this._setFontSize(c);break;case 3:a.addClass("font_b");b.addClass("font_b");this._setFontSize(c);break;case 4:a.addClass("font_b2");b.addClass("font_b2");this._setFontSize(c);break}switch(d){case 0:a.removeClass("font_s2");b.removeClass("font_s2");break;case 1:a.removeClass("font_s");b.removeClass("font_s");break;case 2:break;case 3:a.removeClass("font_b");b.removeClass("font_b");break;case 4:a.removeClass("font_b2");b.removeClass("font_b2");break}},_setFontSize:function(b){var a=b;$Cookie().set(CookieHolder.MOBILE_POST_VIEW_FONT_SIZE_TYPE.KEY,a,CookieHolder.MOBILE_POST_VIEW_FONT_SIZE_TYPE.DURATION)},_adjustFontSizeModifyButton:function(a){if(a=="3"){if(this.se3FontSize==1){$Element("moreBig").addClass("off");$Element("moreSmall").removeClass("off")}else{$Element("moreBig").removeClass("off");$Element("moreSmall").addClass("off")}}else{if(this.fontSizeStep==4){$Element("moreBig").addClass("off");$Element("moreSmall").removeClass("off")}else{if(this.fontSizeStep==0){$Element("moreBig").removeClass("off");$Element("moreSmall").addClass("off")}else{$Element("moreBig").removeClass("off");$Element("moreSmall").removeClass("off")}}}},_populatePostProperty:function(j){var l=j.query("#_post_property");if(l==null){return}if(l.attr("hasNaverMap")=="true"){if(this.bNaverMapLibLoaded){this._createMapAppViewButtion()}else{var b=document.createElement("script");b.src=this._NAVERMAPLIBURL;var m=document.getElementsByTagName("head")[0];m.appendChild(b);b.onload=function(){this._createMapAppViewButtion()}.bind(this);this.bNaverMapLibLoaded=true}}this.bBlacklistUser=l.attr("isBlacklistUser");this.sBlockType=l.attr("blockType");var a=l.attr("categoryNo");var k=l.attr("logType");var c=l.attr("addDate");var d=this._getCurrentPost();d.blogId=this.sBlogId;d.logNo=this.sLogNo;d.categoryNo=a;d.logType=k;d.addDate=c;d.gdid=l.attr("gdid");d.editorVersion=l.attr("editorversion");d.uri=l.attr("uri");d.relationTypeWithBlog=l.attr("relationTypeWithBlog");d.directoryName=l.attr("directoryName");d.blogUserStatAllow=l.attr("blogUserStatAllow");d.queryString=this.queryString;try{d.attachFilePunishInfo=JSON.parse(l.attr("attachFilePunishInfo"))}catch(h){d.attachFilePunishInfo={}}try{d.attachvideoinfo=JSON.parse(l.attr("attachvideoinfo"))}catch(h){d.attachvideoinfo={}}try{setTimeout(function(){this._nilsend(d)}.bind(this),200)}catch(h){}if(!isInApp){var g=l.attr("browserTitle");gsPostTitle=g;var f=$$.getSingle("title");if(f){try{f.innerHTML=g}catch(h){}}if(d.blogId!=blogId||d.categoryNo!=this.nLastCategoryNo){$Element("_header_categoryName").text(l.attr("blogName"));$Element("_ul_categorylist").html("");this._isLoadingCategory=false;$Element("_postview_loading").show()}}if(l.attr("isRecommendableBlog")=="true"){this._oPostViewVisitRecord.checkRecommendBlog(this.sBlogId,this.sLogNo);if(this._oPostViewVisitRecord.isRecommendedBlog()){this.oBuddyRecommendHandler.notify(this._oPostViewVisitRecord.isLongElapsedRecommend())}}blogId=d.blogId},_getCurrentModuleInjectionData:function(){moduleInjectionData={VIDEO:{ALLOW_SHARE_BUTTONS:this._getCurrentPost()["attachvideoinfo"]}};return moduleInjectionData},_addScrollToWideContent:function(o){if(this._getCurrentPost()["editorVersion"]=="3"){return}var c=window.innerWidth;var b=c<window.innerHeight?c:window.innerHeight;var q=false;var l=false;var k=o.queryAll("table");for(var h=0;h<k.length;h++){var e=k[h];if(+e.width()<=+b){continue}e.addClass("_wideContent");q=true}var p=/(<div)([^>]*?style[\s]*=[\s]*['"]{1}[^>]*?width[\s]*:[\s]*([0-9]+)px[^>]*['"]{1}[^>]*>)/ig;var j=o.html();var m=j;var r;while((r=p.exec(m))!=null){if(r[0].indexOf("_mobileLayoutPhoto")>-1){continue}var g=r[3];if(+b>=+g){continue}var d=r[1]+" class='_wideContent' "+r[2];j=j.replace(r[0],d);l=true}if(q||l){var f=o;if(l){f.html(j)}var n=f.queryAll("._wideContent");for(var h=0;h<n.length;h++){var a=n[h];if(a&&!this._isApplied(a)){a.replace(this._getScrollElString(a,c))}}}if(q||l){this.tsh=new ThumbnailScrollHandler();this.tsh.start(o,"_contentScrollArea",20)}},_hasScrollParent:function(a){return a.hasClass("_wideContent")},_isApplied:function(a){a.parent(this._hasScrollParent,10).length>0},_getScrollElString:function(a,b){return"<div class='_contentScrollArea' style='position:relative;z-index:2100;overflow-x:hidden;width:"+(b-20)+"px'><div style='width:"+a.width()+"px'>"+a.outerHTML()+"</div></div>"},_loadTag:function(){var a=this._getContainerElement().query(".past_tag");if(a==null||a.hasClass("_hide_tag")||(a.query("dd")&&$S(a.query("dd").text()).trim().$value()=="")){return}a.show()},_bindTagLinkOnContents:function(){contentsTagLinker.bindTagLinkOnContents((function(a){return function(c){var b=document.createElement("a");b.className="tag";b.href="/BlogTagView.nhn?blogId="+a+"&pushNavigation=true&tagName="+c;b.innerHTML="#"+c;$Element(b).attach("click",function(d){nclk(d.element,"pst.posttag","","")});return b}})(this.sBlogId))},_loadMarkup:'<div class="loading _pageOnLoad" style="display:none;"><span class="img_loading2 sim">로딩중</span></div>',_lazyViewLoad:function(){var a=$$.getSingle(".section_t1");if(a){if(window.innerHeight<a.offsetTop){$Element($$.getSingle(".floating_menu")).attr("style","")}}},lazyViewLoad:function(){this._lazyViewLoad()},_lazyViewLoadForImageFocus:function(){this._lazyViewLoad();if(this.imageCode){var a=this.findFocusingTarget(this.imageCode);if(a===event.target){this.scrollToTarget(a)}}},_resizeMusicIframe:function(){var a=jindo.$$("._musicPlayer");if(a!=null){for(var b=0;b<a.length;b++){iframeUtil.resizeIfrWithMargin(a[b],0,0)}}},_addNoticePost:function(){var a=$Ajax(sUrl,{onload:$Fn(function(c){var b=$Json(c.json()).toObject();if(b.result){$Element("_ul_categorylist").html(b.result);$Element("_category_"+oCurrent.categoryNo).addClass("on");if(this.oScroll){this.oScroll.destroy()}this.oScroll=new jindo.m.Scroll("_scroll_area",{bUseVScroll:true,bUseMomentum:true,bUseHScroll:false});this._isLoadingCategory=false}},this).bind(),timeout:3,ontimeout:$Fn(function(c){var b=this;alertLayer(this._msgTimeout,function(){b._isLoadingCategory=false;$Element("_categoryName").removeClass("on");$Element("_div_categorylist").removeClass("on")})},this).bind(),onerror:$Fn(function(c){var b=this;alertLayer(this._msgServerError,function(){b._isLoadingCategory=false;$Element("_categoryName").removeClass("on");$Element("_div_categorylist").removeClass("on")})},this).bind()});a.request({blogId:oCurrent.blogId})},timerStop:function(){this.oPostViewVisitRecordHandler.timerStop();this.oPostViewVisitRecordHandler._isActivated=false},_nilsend:function(c){if(c==null){return}var d=c.blogId;var b=c.uri;var g=c.relationTypeWithBlog;var k=c.gdid;var f=c.directoryName;var j=document.referrer;var a=c.queryString;if(c.blogUserStatAllow=="true"){var h=true}else{var h=false}if(j.indexOf("proxyReferer=")<0&&a.indexOf("proxyReferer=")>=0){j+=a}var e="post_view";new nilForBlogCVAnalyst(d,b,g,k,f,j,h,e,false,this.isNilAnalystLeaveEvent)},setFocusImageCode:function(a){this.imageCode=a},findFocusingTarget:function(d){var b=document.querySelectorAll(".post_ct img");var c;for(var a=0;a<b.length;a++){if(b[a].getAttribute("src").indexOf(d)>0){c=b[a];break}}return c},scrollToTarget:function(a){if(a){a.scrollIntoView();window.scrollTo(window.scrollX,window.scrollY-10)}}});var backBtnSympathyInterval;var _backBtnSympathyIntervalHandler=function(){var b=$Element($$.getSingle("body")).queryAll("._sympathyBtn");if(b.length<1){return}var e=b[0];var c=e.attr("data-likeit");if(c=="0"){return}else{clearInterval(backBtnSympathyInterval);var a=parseInt(e.query(".u_cnt").text());var g=$Element($$.getSingle("body")).queryAll(".btn_like_more");for(var d=0;d<g.length;d++){var f=g[d];if(a>0){f.attr("style","")}else{f.attr("style","display:none")}}}};backBtnSympathyInterval=setInterval(_backBtnSympathyIntervalHandler,1000);var CategoryPostHandler=$Class({$init:function(c,a,b){this.currentUrl="/rego/RelatedPostListAsync.nhn";this.nextUrl="/rego/NextRelatedPostListAsync.nhn";this.prevUrl="/rego/PrevRelatedPostListAsync.nhn";this.nextParam={};this.prevParam={};this.sBlogId=c;this.sCategoryNo=a;this.sLogType=b;this.oCaller=null},loadCurrent:function(a,b){this._initParam();this._load(this.currentUrl,a,b,true)},loadNext:function(a){if(this.hasNext()){this._load(this.nextUrl,this.nextParam[this.currentUrl],a,false)}},loadPrev:function(a){if(this.hasPrev()){this._load(this.prevUrl,this.prevParam[this.currentUrl],a,false)}},_load:function(c,b,e,d){var a=this;this.oCaller=new $Ajax(c,{async:d,onload:function(f){var h=f.json();if(h.result){var g=h.result;if(g.nextPageInfo!=null){g.nextPageInfo.categoryNo=b.categoryNo;g.nextPageInfo.logType=b.logType;g.nextPageInfo.blogId=b.blogId}if(g.prevPageInfo!=null){g.prevPageInfo.categoryNo=b.categoryNo;g.prevPageInfo.logType=b.logType;g.prevPageInfo.blogId=b.blogId}a.nextParam[c]=g.nextPageInfo;a.prevParam[c]=g.prevPageInfo;e(g)}}});this.oCaller.request(b)},nextToCurrent:function(){this.nextParam[this.prevUrl]=this.nextParam[this.currentUrl];this.prevParam[this.prevUrl]=this.prevParam[this.currentUrl];this.nextParam[this.currentUrl]=this.nextParam[this.nextUrl];this.prevParam[this.currentUrl]=this.prevParam[this.nextUrl]},prevToCurrent:function(){this.nextParam[this.nextUrl]=this.nextParam[this.currentUrl];this.prevParam[this.nextUrl]=this.prevParam[this.currentUrl];this.nextParam[this.currentUrl]=this.nextParam[this.prevUrl];this.prevParam[this.currentUrl]=this.prevParam[this.prevUrl]},_initParam:function(){try{this.nextParam[this.nextUrl]=this.nextParam[this.currentUrl]=this.nextParam[this.prevUrl]=null;this.prevParam[this.nextUrl]=this.prevParam[this.currentUrl]=this.prevParam[this.prevUrl]=null}catch(a){}},_getParam:function(b,a){return{blogId:this.sBlogId,categoryNo:this.sCategoryNo,logType:this.sLogType,logNo:b,addDate:a}},hasNext:function(){return this.nextParam[this.currentUrl]!=null},hasPrev:function(){return this.prevParam[this.currentUrl]!=null},abort:function(){if(this.oCaller!=null){this.oCaller.abort()}}});var CategoryPostFlickingHandler=$Class({$init:function(c,a,b){this.currentUrl="/rego/RelatedPostListAsync.nhn";this.nextUrl="/rego/NextRelatedPostListAsync.nhn";this.prevUrl="/rego/PrevRelatedPostListAsync.nhn";this.nextParam=null;this.prevParam=null;this.sBlogId=c;this.sCategoryNo=a;this.sLogType=b;this.oCaller=null},loadCurrent:function(a,b){this._load(this.currentUrl,a,b,true)},loadNext:function(b,a){if(this.hasNext()){this._load(this.nextUrl,this.nextParam,b,a)}},loadPrev:function(b,a){if(this.hasPrev()){this._load(this.prevUrl,this.prevParam,b,a)}},_load:function(c,b,e,d){var a=this;this.oCaller=new $Ajax(c,{async:d,onload:function(f){var h=f.json();if(h.result){var g=h.result;if(g.nextPageInfo!=null){g.nextPageInfo.categoryNo=b.categoryNo;g.nextPageInfo.logType=b.logType;g.nextPageInfo.blogId=b.blogId}if(g.prevPageInfo!=null){g.prevPageInfo.categoryNo=b.categoryNo;g.prevPageInfo.logType=b.logType;g.prevPageInfo.blogId=b.blogId}if(c==a.currentUrl){a.nextParam=g.nextPageInfo;a.prevParam=g.prevPageInfo}else{if(c==a.nextUrl){a.nextParam=g.nextPageInfo}else{if(c==a.prevUrl){a.prevParam=g.prevPageInfo}}}e(g)}}});this.oCaller.request(b)},_getParam:function(b,a){return{blogId:this.sBlogId,categoryNo:this.sCategoryNo,logType:this.sLogType,logNo:b,addDate:a}},hasNext:function(){return this.nextParam!=null},hasPrev:function(){return this.prevParam!=null},abort:function(){if(this.oCaller!=null){this.oCaller.abort()}}});var RelatedPostListController=$Class({$init:function(a){if(exposeRelatedPostList&&isRelatedPostListExposeTarget){this.currentPost=a;this._loadCategoryPostList()}},_getCurrentPost:function(){return this.currentPost},_loadCategoryPostList:function(){var d=this;var e=this._getCurrentPost();this.oCategoryPostListHandler=new CategoryPostHandler(e.blogId,e.categoryNo,e.logType);this.tplCategoryPostList=$Template("category_post_list_template");this.isLoadingCategoryPostList=false;var c={blogId:e.blogId,logNo:e.logNo,categoryNo:e.categoryNo,logType:e.logType,addDate:e.addDate};this.oCategoryPostListHandler.loadCurrent(c,$Fn(function(g){d._setCategoryPostListElement(g.posts);d._resetCategoryPostListNavButton();d.isLoadingCategoryPostList=true;$ElementList("div._relatedCategoryPostListArea").attr("style","");EndPageExposeRecordHandler.initOther("RECENT_POST_LIST")},this).bind());var b=$ElementList("div._categoryPostListPagingBtnArea a._category_post_list_btn");for(var a=0;a<b.length();a++){var f=b.get(a);$Fn(function(g){var h=$Element(g.currentElement);if(h.hasClass("btn_next")){if(d.isLoadingCategoryPostList==true){d.isLoadingCategoryPostList=false;d._loadNextCategoryPostList()}}else{if(h.hasClass("btn_prev")){if(d.isLoadingCategoryPostList==true){d.isLoadingCategoryPostList=false;d._loadPrevCategoryPostList()}}}},this).attach(f,"click")}},_resetCategoryPostListNavButton:function(){if(this.oCategoryPostListHandler.hasNext()){this._activateCategoryPostListNavButton("btn_next")}else{this._deactivateCategoryPostListNavButton("btn_next")}if(this.oCategoryPostListHandler.hasPrev()){this._activateCategoryPostListNavButton("btn_prev")}else{this._deactivateCategoryPostListNavButton("btn_prev")}},_activateCategoryPostListNavButton:function(a){$ElementList("div._categoryPostListPagingBtnArea a."+a).attr("style","");$ElementList("div._categoryPostListPagingBtnArea span."+a).attr("style","display:none")},_deactivateCategoryPostListNavButton:function(a){$ElementList("div._categoryPostListPagingBtnArea a."+a).attr("style","display:none");$ElementList("div._categoryPostListPagingBtnArea span."+a).attr("style","")},_setCategoryPostListElement:function(a){var b=this._getCurrentPost();$ElementList("ul._category_post_list").html(this.tplCategoryPostList.process({blogId:b.blogId,logNo:b.logNo,posts:a}))},_loadNextCategoryPostList:function(){if(this.oCategoryPostListHandler.hasNext()){this.oCategoryPostListHandler.loadNext($Fn(function(a){this._setCategoryPostListElement(a.posts);this.oCategoryPostListHandler.nextToCurrent();this._resetCategoryPostListNavButton();this.isLoadingCategoryPostList=true},this).bind())}},_loadPrevCategoryPostList:function(){if(this.oCategoryPostListHandler.hasPrev()){this.oCategoryPostListHandler.loadPrev($Fn(function(a){this._setCategoryPostListElement(a.posts);this.oCategoryPostListHandler.prevToCurrent();this._resetCategoryPostListNavButton();this.isLoadingCategoryPostList=true},this).bind())}}});var RelatedPostListFlickingController=$Class({$init:function(a){if(exposeRelatedPostList&&isRelatedPostListExposeTarget){this.currentPost=a;this._initRelatedCategoryPostList();this.nextLoadFlickingPage=0;this.prevLoadFlickingPage=0;this.isFirstAsyncLoading=true;this.isLoadingRelatedPostList=false;this.isNextLock=false;this.isPrevLock=false;this.beforeScrollPage=0;this.numberOfPage=1;this.elContainerList=$ElementList("._flickingContainer");this.elScrollList=$ElementList("._flickingScroll")}},_getContainerId:function(){var a="_flickingContainer";if($Element($$.getSingle(".tablet_aside")).css("display")!="none"){a+="_tablet"}return a},_getElementId:function(b,a){if(b.hasClass("_flicking_tablet")){a+="_tablet"}return a},_getCurrentPost:function(){return this.currentPost},_lock:function(){if(this.categoryPostListCarouselScroll.isInTransition){return true}if(this.isLoadingRelatedPostList){return true}this.isLoadingRelatedPostList=true;return false},_unlock:function(){this.isLoadingRelatedPostList=false},_initCarouselScroll:function(b,d){var a=document.getElementById(b);var c=this;c.categoryPostListCarouselScroll=new IScroll(a,{scrollX:true,scrollY:false,momentum:false,snapThreshold:0.2,snap:true,snapSpeed:400,keyBindings:false,preventDefault:true,eventPassthrough:"vertical",resizePolling:0});c.categoryPostListCarouselScroll.on("beforeScrollStart",function(){c._resizeWidthAndRefresh();if(c.isFirstAsyncLoading){c.isFirstAsyncLoading=false;if(c._lock()){return}if(!c.isPrevLock){c.isPrevLock=true;c._preloadPrevCategoryPostList(true,function(){c.isPrevLock=false;c._unlock()})}if(!c.isNextLock){c.isNextLock=true;c._preloadNextCategoryPostList(true,function(){c.isNextLock=false;c._unlock()})}}else{c._preloadCarousel()}});c.categoryPostListCarouselScroll.on("scrollStart",function(){c.beforeScrollPage=c.categoryPostListCarouselScroll.currentPage.pageX});c.categoryPostListCarouselScroll.on("scrollEnd",function(){c._preloadCarousel();if(c.beforeScrollPage<c.categoryPostListCarouselScroll.currentPage.pageX){nclk(this,"pst.fnext","","")}else{if(c.beforeScrollPage>c.categoryPostListCarouselScroll.currentPage.pageX){nclk(this,"pst.fprev","","")}}});if(d!=-1){c._resizeElement(true);c.categoryPostListCarouselScroll.refresh();c.categoryPostListCarouselScroll.goToPage(d,0,0);c._resizeElement(false);c._resetCategoryPostListNavButton()}},_preloadCarousel:function(){var a=this;if(a._lock()){return}var b=function(){a._resizeElement(false);a._resetCategoryPostListNavButton();a._unlock()};if(a.categoryPostListCarouselScroll.x==0){a.categoryPostListCarouselScroll.goToPage(0,0,0)}else{if(a.categoryPostListCarouselScroll.x==a.categoryPostListCarouselScroll.maxScrollX){a.categoryPostListCarouselScroll.goToPage(a.categoryPostListCarouselScroll.pages.length-1,0,0)}}if(a.categoryPostListCarouselScroll.pages.length==a.categoryPostListCarouselScroll.currentPage.pageX+1){if(a.isNextLock){return}a.isNextLock=true;a._preloadNextCategoryPostList(false,function(){b();a.isNextLock=false})}else{if(a.categoryPostListCarouselScroll.currentPage.pageX==0){if(a.isPrevLock){return}a.isPrevLock=true;a._preloadPrevCategoryPostList(false,function(){b();a.isPrevLock=false})}else{b()}}},_initRelatedCategoryPostList:function(){var d=this;var e=d._getCurrentPost();d.oCategoryPostListHandler=new CategoryPostFlickingHandler(e.blogId,e.categoryNo,e.logType);d.tplCategoryPostList=$Template("category_post_list_template");var c={blogId:e.blogId,logNo:e.logNo,categoryNo:e.categoryNo,logType:e.logType,addDate:e.addDate};d.oCategoryPostListHandler.loadCurrent(c,$Fn(function(g){$ElementList("div._relatedCategoryPostListArea").attr("style","");if(g.hasNext||g.hasPrev){$ElementList("div._categoryPostListPagingBtnArea").attr("style","")}var j=this._getCurrentPost();$ElementList("ul._category_post_list").html(d.tplCategoryPostList.process({blogId:j.blogId,logNo:j.logNo,posts:g.posts}));d.beforeContainerId=d._getContainerId();d._initCarouselScroll(d.beforeContainerId,-1);d._resetCategoryPostListNavButton();$Element(window).attach("resize",function(){setTimeout(function(){d._resizeElement(false)}.bind(d),0)}.bind(d));var h="onorientationchange" in window?"orientationchange":"resize";$Element(window).attach(h,function(){setTimeout(function(){var k=d._getContainerId();if(d.beforeContainerId!=k){var l=d.categoryPostListCarouselScroll.currentPage.pageX;d.beforeContainerId=k;d.categoryPostListCarouselScroll.destroy();d.categoryPostListCarouselScroll=null;d._initCarouselScroll(k,l)}},10)}.bind(d));EndPageExposeRecordHandler.initOther("RECENT_POST_LIST")},d).bind());var b=$ElementList("div._categoryPostListPagingBtnArea a._category_post_list_btn");for(var a=0;a<b.length();a++){var f=b.get(a);$Fn(function(h){if(d._lock()){return}d._resizeWidthAndRefresh();var j=$Element(h.currentElement);if(j.hasClass("btn_next")){var g=function(){d.categoryPostListCarouselScroll.next();d._resizeElement(false);d._resetCategoryPostListNavButton();d.isNextLock=false;d._unlock()};if(d.isFirstAsyncLoading){d.isFirstAsyncLoading=false;if(d.isNextLock){return}d.isNextLock=true;d._preloadNextCategoryPostList(true,g)}else{g()}}else{if(j.hasClass("btn_prev")){var k=function(){setTimeout(function(){d.categoryPostListCarouselScroll.prev();d._resizeElement(false);d._resetCategoryPostListNavButton();d.isPrevLock=false;d._unlock()},0)};if(d.isFirstAsyncLoading){d.isFirstAsyncLoading=false;if(d.isPrevLock){return}d.isPrevLock=true;d._preloadPrevCategoryPostList(true,k)}else{k()}}else{d._unlock()}}},this).attach(f,"click")}},_addNextPostListElement:function(f){var d=this;for(var c=0;c<d.elScrollList.length();c++){var a=d.elScrollList.get(c);var b=d._getElementId(a,"_relatedCategoryPostListFlickingPage_"+this.nextLoadFlickingPage);var g=d._getCurrentPost();var e=document.createElement("ul");e.innerHTML=d.tplCategoryPostList.process({blogId:g.blogId,logNo:g.logNo,posts:f});e.id=b;e.className="_category_post_list";a.append(e)}},_preloadNextCategoryPostList:function(b,c){var a=this;if(a.oCategoryPostListHandler.hasNext()){a.oCategoryPostListHandler.loadNext($Fn(function(d){a.numberOfPage+=1;a.nextLoadFlickingPage+=1;a._addNextPostListElement(d.posts);setTimeout(function(){a._resizeElement(false);a.categoryPostListCarouselScroll.refresh();if(c){c()}},0)},a).bind(),b)}else{if(c){c()}}},_clonePrevPostListElement:function(){var d=this;for(var b=0;b<d.elScrollList.length();b++){var a=d.elScrollList.get(b);var c=document.getElementById(d._getElementId(a,"_relatedCategoryPostListFlickingPage_"+d.prevLoadFlickingPage));var e=c.cloneNode(true);e.id=d._getElementId(a,"_relatedCategoryPostListFlickingPage_"+(d.prevLoadFlickingPage-1));a.prepend(e);d._resizeElement(false);d.categoryPostListCarouselScroll.refresh();d.categoryPostListCarouselScroll.goToPage(1,0,0)}},_replacePrevCategoryPostListElement:function(e){var d=this;for(var c=0;c<d.elScrollList.length();c++){var a=d.elScrollList.get(c);var b=this._getElementId(a,"_relatedCategoryPostListFlickingPage_"+d.prevLoadFlickingPage);var f=d._getCurrentPost();document.getElementById(b).innerHTML=d.tplCategoryPostList.process({blogId:f.blogId,logNo:f.logNo,posts:e})}},_preloadPrevCategoryPostList:function(b,c){var a=this;if(a.oCategoryPostListHandler.hasPrev()){a.oCategoryPostListHandler.loadPrev($Fn(function(d){a.numberOfPage+=1;a._clonePrevPostListElement();a.prevLoadFlickingPage-=1;a._replacePrevCategoryPostListElement(d.posts);if(c){c()}},a).bind(),b)}else{if(c){c()}}},_resizeElement:function(a){var l=this;for(var c=0;c<this.elContainerList.length();c++){var e=this.elContainerList.get(c);var b=e.width();var m=l._getElementId(e,"div#_flickingContainer");var j=$ElementList(m+" ul._category_post_list");j.css({width:b+"px","float":"left"});var g=l._getElementId(e,"#_relatedCategoryPostListFlickingPage_0");if(!a){g="#"+j.get(l.categoryPostListCarouselScroll.currentPage.pageX).attr("id")}var k=$ElementList(g+" li");var n=0;for(var d=0;d<k.length();d++){n+=k.get(d).height()}var h=b*this.numberOfPage;var f=e.query("._flickingScroll");f.width(h);f.height(n);e.height(n)}},_resizeWidthAndRefresh:function(){var c=this;for(var a=0;a<c.elContainerList.length();a++){var d=c.elContainerList.get(a);var b=d.width()*c.numberOfPage;d.query("._flickingScroll").width(b);c.categoryPostListCarouselScroll.refresh()}},_resetCategoryPostListNavButton:function(){if(this._hasNext()){this._activateCategoryPostListNavButton("btn_next")}else{this._deactivateCategoryPostListNavButton("btn_next")}if(this._hasPrev()){this._activateCategoryPostListNavButton("btn_prev")}else{this._deactivateCategoryPostListNavButton("btn_prev")}},_hasNext:function(){if(this.categoryPostListCarouselScroll.pages.length==this.categoryPostListCarouselScroll.currentPage.pageX+1){return this.oCategoryPostListHandler.hasNext()}else{return true}},_hasPrev:function(){if(this.categoryPostListCarouselScroll.currentPage.pageX==0){return this.oCategoryPostListHandler.hasPrev()}else{return true}},_activateCategoryPostListNavButton:function(a){$ElementList("div._categoryPostListPagingBtnArea a."+a).attr("style","");$ElementList("div._categoryPostListPagingBtnArea span."+a).attr("style","display:none")},_deactivateCategoryPostListNavButton:function(a){$ElementList("div._categoryPostListPagingBtnArea a."+a).attr("style","display:none");$ElementList("div._categoryPostListPagingBtnArea span."+a).attr("style","")},resize:function(){this._resizeElement(false)}});var BannerView=$Class({$init:function(){},showSectionMainFloatingBanner:function(c,a){if(!$Element(c)){return}if(a==undefined||a=="undefined"||a==null){a=10}$Element(c).show();var b=new nhn.FloatingBanner({sBannerId:c,sCloseBtnId:c+"_close",nTimeout:a,nBannerHeight:$Element(c).height(),sCookieName:"Cookie_"+c,nHidePeriodOnSelect:365,nHidePeriodOnClose:365})},closeSectionMainFullLayerBanner:function(a){if(!$Element(a)){return}this.hideSectionMainFullLayerBanner(a);this.clickedBannerCloseButton(a)},hideSectionMainFullLayerBanner:function(a){if(!$Element(a)){return}$Element(a).hide();document.ontouchmove=function(b){};if($Element("header")){$Element("header").show()}if($Element("contentView")){$Element("contentView").show()}},clickedBannerCloseButton:function(a){if(!$Element(a)){return}$Cookie().set(a,"close",365)},showSectionMainFullLayerBanner:function(b){if(!$Element(b)){return}var a=$Cookie().get(b);if(a!="close"){if($Element("header")){$Element("header").hide()}if($Element("contentView")){$Element("contentView").hide()}$Element(b).show()}else{this.hideSectionMainFullLayerBanner(b)}},showBanner:function(b){if(!$Element(b)){return}var a=$Cookie().get(b);if(a!="close"){$Element(b).show()}else{this.hideBanner(b)}},showLayerBanner:function(b){if(!$Element(b)){return}var a=$Cookie().get(b);if(a!="close"){this._resizeLayerHeight(b);$Element(b).show()}else{this.hideBanner(b)}},_resizeLayerHeight:function(e){var c=$Element(e);if(c){var d=document.body;var b=document.documentElement;var a;if(document.height!==undefined){a=document.height}else{a=Math.max(d.scrollHeight,d.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)}c.height(a)}},closeBanner:function(a){if(!$Element(a)){return}this.hideBanner(a);this.clickedBannerCloseButton(a)},hideBanner:function(a){if(!$Element(a)){return}$Element(a).hide()}});var BannerModel=$Class({$init:function(){this._tplBaseImageBannerHtml=$Template("<div class=\"p_bner _banner _param(\\{ {if banner.targetAppVersion != ''} appVersion:'{=banner.targetAppVersion}',{/if} {if banner.targetOS == '1'}os:'web',{elseif banner.targetOS == '2'} os:'app',{/if} {if banner.targetDevice == '1'}agent:'android',{elseif banner.targetDevice == '2'} agent:'iOS',{/if} openDate:'{=banner.startDateFormatted} ~ {=banner.endDateFormatted}' \\})\" style=\"border:none;background:{=banner.bannerBgcolor};display:none\" id=\"banner_{=sectionName}_{=banner.bannerId}\"><a href=\"{=banner.bannerLink}\" class=\"imageBanner\" onclick=\"nclk(this, '{=banner.nclickCode}', '', '');\"><img src=\"{=banner.bannerImgUrl}\" width=\"320\" height=\"59\" alt=\"\"></a></div>{if banner.useCloseButton }<a href=\"#\" class=\"btn_del clse _closeBanner _param(banner_{=sectionName}_{=banner.bannerId}) _returnFalse\"><span class='sim'>배너 닫기</span></a>{/if}");this._tplBaseTextBannerHtml=$Template("<div class=\"inapp_bner _banner _param(\\{ {if banner.targetAppVersion != ''} appVersion:'{=banner.targetAppVersion}',{/if} {if banner.targetOS == '1'}os:'web',{elseif banner.targetOS == '2'} os:'app',{/if} {if banner.targetDevice == '1'}agent:'android',{elseif banner.targetDevice == '2'} agent:'iOS',{/if} openDate:'{=banner.startDateFormatted} ~ {=banner.endDateFormatted}' \\})\" style=\"display:none\" id=\"banner_{=sectionName}_{=banner.bannerId}\"><a href=\"{=banner.bannerLink}\" onclick=\"nclk(this, '{=banner.nclickCode}', '', '');\" class=\"btn_bner\">{=banner.bannerText}</a></div>{if banner.useCloseButton }<a href=\"#\" class=\"clse_btn _closeBanner _param(banner_{=sectionName}_{=banner.bannerId}) _returnFalse\">닫기</a>{/if}");this._tplBaseLayerBannerHtml=$Template("<div class=\"ly_bner _banner _param(\\{ {if banner.targetAppVersion != ''} appVersion:'{=banner.targetAppVersion}',{/if} {if banner.targetOS == '1'}os:'web',{elseif banner.targetOS == '2'} os:'app',{/if} {if banner.targetDevice == '1'}agent:'android',{elseif banner.targetDevice == '2'} agent:'iOS',{/if} openDate:'{=banner.startDateFormatted} ~ {=banner.endDateFormatted}', bannerType:'layer' \\})\" style=\"top:0;left:0;z-index:100;display:none\" id=\"banner_{=sectionName}_{=banner.bannerId}\"> {=banner.bannerText} <a href=\"#\" class=\"pr_evently_clse _closeSectionMainFullLayerBanner _param(banner_{=sectionName}_{=banner.bannerId}) _returnFalse\">이벤트 닫기</a> </div>");this._IMAGE_BANNER=0;this._TEXT_BANNER=1;this._LAYER_BANNER=2},getBannerTemplate:function(b){var a="";if(b==this._IMAGE_BANNER){a=this._getBaseImageBannerTemplate()}else{if(b==this._TEXT_BANNER){a=this._getBaseTextBannerTemplate()}else{if(b==this._LAYER_BANNER){a=this._getBaseLayerBannerTemplate()}}}return a},_getBaseImageBannerTemplate:function(){return this._tplBaseImageBannerHtml},_getBaseTextBannerTemplate:function(){return this._tplBaseTextBannerHtml},_getBaseLayerBannerTemplate:function(a){return this._tplBaseLayerBannerHtml},decorateCloseButton:function(b,a){a.useCloseButton=true;if(b=="TOPIC_LIST_HOT_TOPIC_BOTTOM_WEB"||b=="POST_VIEW_BOTTOM_WEB"){a.useCloseButton=false}return a}});var BannerController=$Class({$init:function(e,c,a,d,b){this.mBanner=c;this.vBanner=e;this.isAndroidBrowser=a;this.isInApp=d;this.inAppVersion=b;this._OS_WEB="web";this._OS_APP="app";this._OS_ALL="all";this._AGENT_IOS="iOS";this._AGENT_ANDROID="android";this._AGENT_ALL="all";this._EXEC_DELAY_TIME=200},start:function(){this._findBanner()},doClick:function(b){var d=b.element;var a=$Element(cssquery.getSingle("!a",d)?cssquery.getSingle("!a",d):d);var f=paramUtil.getParam(a&&a.className()!=""?a.className():d.className);if(a.hasClass("_closeSectionMainFullLayerBanner")){this.vBanner.closeSectionMainFullLayerBanner(f[0])}else{if(a.hasClass("_clickedFullLayerBannerCloseButton")){this.vBanner.clickedFullLayerBannerCloseButton(f[0])}else{if(a.hasClass("_closeBanner")){this.vBanner.closeBanner(f[0])}else{if(a.hasClass("_sendSns")){var e=f[0];var c=$Json(f[1]).toObject();ExternalAppLauncher.launch(e,c)}}}}if(a.hasClass("_returnFalse")){b.stop()}},_readyForExecute:function(){if(this.isAndroidBrowser){commonUtil.wait(this._EXEC_DELAY_TIME)}},_findBanner:function(){this._findBannerJson();this._findBannerElement()},_findBannerElement:function(){this._readyForExecute();var a="._banner";var b=$$(a);this._showBanner(b)},_findBannerJson:function(){this._readyForExecute();if(typeof(gBannerListMapJson)=="undefined"||gBannerListMapJson==null||gBannerListMapJson==""){return}var n=$Json(gBannerListMapJson);for(var c in n.toObject()){var h=n.get(c);var g=new Array();var b=$Cookie();for(var e=0;e<h.length;e++){var k=b.get("banner_"+c+"_"+h[e].bannerId);if(k!=null&&k=="close"){continue}var d=h[e].targetDeviceTypeValue;if(!this._allowBannerAgent(d)){continue}var a=h[e].targetAppVersion;if(!this._allowBannerAppVersion(a)){continue}g.push(h[e])}if(g==null||g.length==0){continue}var f=(g.length==0)?0:Math.floor(Math.random()*g.length);var p=this.mBanner.getBannerTemplate(g[f].bannerType);var j=this.mBanner.decorateCloseButton(c,g[f]);if(p==null||j==null){continue}var m=p.process({banner:j,sectionName:c});var l=$Element(c);if(l){l.html(m)}}},_allowBannerOS:function(a){if(a==this._OS_WEB&&this.isInApp){return false}if(a==this._OS_APP&&!this.isInApp){return false}return true},_allowBannerAgent:function(a){if(String(a).toUpperCase()==this._AGENT_ANDROID.toUpperCase()&&!this.isAndroidBrowser){return false}if(String(a).toUpperCase()==this._AGENT_IOS.toUpperCase()&&!isSafariBrowser){return false}return true},_allowBannerAppVersion:function(b){if(b==null||b==""){return true}try{var a=String(b).split(".");var d=String(this.inAppVersion).split(".");if(a.length>2&&d.length>2){if(parseInt(d[0])<parseInt(a[0])){return false}if(parseInt(d[1])<parseInt(a[1])){return false}if(parseInt(d[2])<parseInt(a[2])){return false}}else{if(a.length==1&&d.length==1){if(parseInt(d[0])<parseInt(a[0])){return false}}}}catch(c){window.console.log(c)}return true},_allowBannerOpenDate:function(a){if(a==null||a==""){return true}var g=String(a).split("~");if(g.length==2){var e=g[0].split(/[\/ :]/);var d=g[1].split(/[\/ :]/);if(e.length>2&&d.length>2){var c=new Date();var b;if(e.length==3){b=new Date(e[0],e[1]-1,e[2])}else{if(e.length==5){b=new Date(e[0],e[1]-1,e[2],e[3],e[4])}}var f;if(d.length==3){f=new Date(d[0],d[1]-1,parseInt(d[2])+1)}else{if(d.length==5){f=new Date(d[0],d[1]-1,d[2],d[3],d[4])}}if(Date.parse(b)>Date.parse(c)||Date.parse(c)>Date.parse(f)){return false}}}return true},_showBanner:function(l){for(var e in l){if(l[e]!=null){var j=paramUtil.getParam(l[e].className);var b=(j==null||j=="")?$Json(""):$Json(j[0]);var k=b.get("os")==null||b.get("os")==""?this._OS_ALL:b.get("os");if(!this._allowBannerOS(k)){continue}var d=b.get("agent")==null||b.get("agent")==""?this._AGENT_ALL:b.get("agent");if(!this._allowBannerAgent(d)){continue}var f=b.get("openDate");if(!this._allowBannerOpenDate(f)){continue}if(k==this._OS_APP){var c=b.get("appVersion");if(!this._allowBannerAppVersion(c)){continue}}var g=$$.getSingle("!.top_banner",l[e]);if(g){$Fn(this.doClick,this).attach(g,"click")}else{$Fn(this.doClick,this).attach(l[e],"click")}var a=b.get("bannerType");if(a==null||a==""||a=="image"){this.vBanner.showBanner(l[e].id)}else{if(a=="layer"){this.vBanner.showSectionMainFullLayerBanner(l[e].id)}else{if(a=="floating"){var h=(typeof(gFloatingBannerTimeOut)=="undefined"||gFloatingBannerTimeOut==null)?3:gFloatingBannerTimeOut;this.vBanner.showSectionMainFloatingBanner(gFloatingBannerId,h)}}}}}}});var NaverMapUtil=$Class({_htMapCustomTag:{iOS:{prefix:"navermaps://",postfix:""},iOS9:{prefix:"http://m.map.naver.com/launchApp/",postfix:""},android:{prefix:"intent://",postfix:"#Intent;scheme=navermaps;action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;package=com.nhn.android.nmap;end"}},_APPSTORE_MAP:"http://itunes.apple.com/app/id311867728?mt=8",NO_DIAL_NUMBER:"전화번호가 제공되지 않는 업체입니다.",DIAL_NUMBER_API_ERROR:"일시적인 오류로 전화번호를 조회할 수 없습니다.\n잠시 후에 다시 이용해 주세요.",createAppViewButton:function(welBase){var aMapInfo=welBase.queryAll("._mapInfo");for(var idx=0;idx<aMapInfo.length;idx++){var oMapInfo=eval("("+$Element(aMapInfo[idx]).text()+")");this._getMapPinCoordinateInfo(oMapInfo)}},_getMapPinCoordinateInfo:function(c,a){var b=new $Ajax(gUrlMap.MapPinCoordinateInfoAsync,{method:"post",type:"xhr",onload:$Fn(function(e){var d=e.json().result;if(d==null){return}c.pointX=d.pointX;c.pointY=d.pointY;if(d.title!=null&&d.title!=""){c.title=d.title}this.attachMapLink(c)},this).bind()}).request({mapId:c.mapId,blogId:blogId})},attachMapLink:function(d){var c=new nhn.api.map.LatLng(d.pointY,d.pointX);var b=this.makeMapLink(c.getY(),c.getX(),d.placeId,d.title);var a=$Element("naverMapAppLink_"+d.mapId);if(a!=null){a.attr("link",b)}},makeMapLink:function(g,c,e,h){var f=null;if(isSafariBrowser){var a=this._getOS();if(a.version>=9){f=this._htMapCustomTag.iOS9}else{f=this._htMapCustomTag.iOS}}else{if(isAndroidBrowser){f=this._htMapCustomTag.android}}if(!f){return null}var b="menu=location2";var d="&pinType=point";if(e){d="&pinType=spot&pinId="+e;b="menu=location"}return f.prefix+"?"+b+d+"&lat="+g+"&lng="+c+"&title="+encodeURIComponent(h)+f.postfix},startMapApp:function(b){var a=new Object();if(isSafariBrowser){a.TYPE="IOS";a.STORE=this._APPSTORE_MAP;a.SUPPORT_UNIVERSALLINK=true}else{a.TYPE="ANDROID";a.STORE="";a.UNIVERSAL=false}AppLauncher.launch(a,b,false,false)},_getOS:function(){var c=navigator.userAgent;var e;var h=false;var f=false;var d=false;var g="";if(c.match(/iPad/i)||c.match(/iPhone/i)){h=true;e=c.indexOf("OS ")}else{if(c.match(/Android/i)){f=true;e=c.indexOf("Android ")}}if(h===true&&e>-1){var b=c.substring(e+3);var a=b.indexOf("_");g=parseInt(b.substring(0,a))}else{if(f===true&&e>-1){var b=c.substring(e+8);var a=b.indexOf(".");g=parseInt(b.substring(0,a))}}return{ios:h,iphone:d,android:f,version:g}},checkAndRequestDialNumber:function(a,c,b){if(c.hasClass("hasNumber")){this._callBizCatcherScriptAndCall(c);return}this._requestDialNumber(a,c,b)},_onSuccessRequestDialNumber:function(c,g,b,f){try{var a;if(c.message&&c.message.result&&(typeof(c.message.result.phone)==="string")){a=c.message.result.phone}if(!a){this._notifyNoDialNumber();return}this._updateDialBtn(a,g,b,f);this._callBizCatcherScriptAndCall(g)}catch(d){this._notifyDialNumberAPIError()}},_requestDialNumber:function(a,c,b){var d=$Ajax(gsPlaceSnippetApiUrl,{method:"get",type:"jsonp",timeout:3,callbackname:"callback",onload:$Fn(function(e){oResponse=e.json();this._onSuccessRequestDialNumber(oResponse,c,a,b)},this).bind(),ontimeout:$Fn(function(f){this._notifyDialNumberAPIError()},this).bind(),onerror:$Fn(function(f){this._notifyDialNumberAPIError()},this).bind()});d.request({m:"snippet",id:a,type:"json"})},_getDialScheme:function(a){return"tel:"+a},_callBizCatcherScriptAndCall:function(b){sendToBizCatcher(b.$value(),false);var a=b.attr("href");this._call(a)},_updateDialBtn:function(a,d,b,c){d.addClass("hasNumber");d.attr("href",this._getDialScheme(a));d.attr("data-for-biz-catcher","mainNumber="+a+"&callSource=BLOG&description="+b+"&keyword="+c)},_call:function(a){if(!a){this._notifyNoDialNumber();return}location.href=a},_notifyNoDialNumber:function(){alert(this.NO_DIAL_NUMBER)},_notifyDialNumberAPIError:function(){alert(this.DIAL_NUMBER_API_ERROR)},goNaverMapLink:function(a,b){if(b){document.location.href="https://m.store.naver.com/places/detailMap?id="+b}else{document.location.href="http://m.map.naver.com/map.nhn?mid="+a}},goNaverMapDetailLink:function(a,b){if(b){document.location.href="https://m.store.naver.com/places/detail?id="+b+"&source=blog"}else{document.location.href="http://m.map.naver.com/map.nhn?mid="+a}},});var SubmitUtil=$Class({$static:{submit:function(a,c,d,b){d=d==null||d==""?"post":d;b=b==null?"":b;var f=$Element("<form>");f.attr("action",a);f.attr("method",d);f.attr("target",b);for(var e in c){if(c.hasOwnProperty(e)){var g=$Element("<input>");g.attr("type","hidden");g.attr("name",e);g.attr("value",c[e]);f.append(g)}}$Element(document.body).append(f);f.$value().submit();if(b!=null){$Element(document.body).remove(f)}},submitUsingIframe:function(b,c,g,e){var f=null;var h="_call_app_";if(e){f=h+new Date().getTime()}else{f=h+b.slice(b.lastIndexOf("/")+1)}var a=f;var d=$(f);if(!d){d=$Element("<iframe>").attr({id:a,name:f,style:"display:none;"});$Element(document.body).append(d)}SubmitUtil.submit(b,c,g,f)}}});var AppLauncher=$Class({$static:{launch:function(e,f,b,d,c){if(!e){return}if(!AppLauncher._validate(e.TYPE)){alertLayer("지원하지 않는 OS 입니다.\n앱을 정상적으로 설치할 수 없습니다.");return}if(e.TYPE=="IOS"){var a=this._getOS();if(a.version>=9){if(e.SUPPORT_UNIVERSALLINK){this._launchIOSByUniversalLink(f)}else{if(this._isNaverInApp()===true){this._installIosApp(f,e.STORE,b,d)}else{window.location.href=f}}}else{this._installIosApp(f,e.STORE,b,d)}}else{if(e.TYPE=="ANDROID"){this._installAndroidApp(f,e.STORE,b,d,c)}}},goStore:function(c,a,b){if(!c){return}if(!AppLauncher._validate(c.TYPE)){alertLayer("지원하지 않는 OS 입니다.\n앱을 정상적으로 설치할 수 없습니다.");return}this._installApp(c.STORE,a,b)},_validate:function(a){return a=="IOS"||a=="ANDROID"},_installIosApp:function(d,b,a,c){this._installApp(b,a,c);this._openApp(d)},_installApp:function(c,b,d){try{var a=+new Date;naverAppCheckTimer=setTimeout(function(){if(+new Date-a<2000){if(b=="true"){confirmLayer(d,function(){window.location.href=c})}else{window.location.href=c}}},1500)}catch(f){alertLayer("앱을 설치할 수 없습니다.")}},_openApp:function(b){var a=document.createElement("DIV");document.body.appendChild(a);a.innerHTML="<iframe src='"+b+"' height='0' width='0' frameborder='0'></iframe>";setTimeout(function(){document.body.removeChild(a)},1500)},_installAndroidApp:function(e,b,a,c,d){if(d==true&&this._isUnderLollipop()){e=e.replace("package=com.nhn.android.blog;","");if(this._isNaverAppInApp()==true){gsAppLaunchLink=e;this._isBlogAppInstall()}else{if(this._isIframeTarget()==true){this._installAndApp(a,c);this._openApp(e)}else{this._customAndroidLaunchApp(e,a,c)}}}else{setTimeout(function(){document.location.href=e},300)}},_isUnderLollipop:function(){var b=$Agent().os().version||"5.0";var a=parseInt(b.substring(0,b.indexOf(".")));return a<5},_isNaverAppInApp:function(){if(navigator.userAgent.match(/NAVER\(inapp; search;/g)||navigator.userAgent.match(/NAVER\(higgs; search;/g)){return true}else{return false}},_isBlogAppInstall:function(){var a=this;window.naverapp_checkinstallapplication_response=function(c){a.naverapp_checkinstallapplication_response(c)};var b="naversearchapp://checkinstallapplication?appPK=com.nhn.android.blog&callbackFn=naverapp_checkinstallapplication_response";document.location.href=b},naverapp_checkinstallapplication_response:function(a){if(a==true){document.location.href=gsAppLaunchLink}else{var b=$Element("naverAppLyr");AppLauncher._scrollLock();b.toggle()}},_isIframeTarget:function(){var e=navigator.userAgent;var a=e.match(/Chrome\/(\d+)/)&&RegExp.$1>=25;var c=/version\/[d+\.]+ Chrome/.test(e);var b=/LG-F(370|350|340|320|310|300|240)/.test(e);var d=c&&b;if(d||!a){return true}else{return false}},_installAndApp:function(b,c){var a=+new Date;naverAppCheckTimer=setTimeout(function(){if(+new Date-a<2000){var d=$Element("naverAppLyr");if(b=="true"){confirmLayer(c,function(){AppLauncher._scrollLock();d.toggle()})}else{AppLauncher._scrollLock();d.toggle()}}},1500)},_scrollLock:function(){if($("body")){$("body").setAttribute("style","overflow:hidden;width:100%;height:100%");var a=/Android 2.3/.test(navigator.userAgent);if(a==true){$Element("naverAppLyr").css("position","absolute")}return}else{return}},_customAndroidLaunchApp:function(c){var a=window.open("about:blank","napp");a.document.write("<script>location.href='"+c+"';<\/script>");var b=setInterval(function(){try{a.location=="undefined";a.document.documenElement}catch(f){clearInterval(b);a.close();var d=$Element("naverAppLyr");AppLauncher._scrollLock();d.toggle()}},100);setTimeout(function(){clearInterval(b);a.close()},3000)},_getOS:function(){var c=navigator.userAgent;var e;var h=false;var f=false;var d=false;var g="";if(c.match(/iPad/i)||c.match(/iPhone/i)){h=true;e=c.indexOf("OS ")}else{if(c.match(/Android/i)){f=true;e=c.indexOf("Android ")}}if(h===true&&e>-1){var b=c.substring(e+3);var a=b.indexOf("_");g=parseInt(b.substring(0,a))}else{if(f===true&&e>-1){var b=c.substring(e+8);var a=b.indexOf(".");g=parseInt(b.substring(0,a))}}return{ios:h,iphone:d,android:f,version:g}},_isNaverInApp:function(){return/NAVER/.test(navigator.userAgent)||(window.g_inapp&&window.g_inapp===1)},_launchIOSByUniversalLink:function(a){window.location.href=a}}});var BlogAppLauncher=$Class({$static:{CUSTOMTAG:{IOS:{TYPE:"IOS",STORE:"http://itunes.apple.com/app/id328813873?mt=8",SUPPORT_UNIVERSALLINK:true},ANDROID:{TYPE:"ANDROID",STORE:"market://details?id=com.nhn.android.blog",NAVERSEARCHAPP_DOWNLOADER:"naversearchapp://appdownloader?version=4&autoInstall=com.nhn.android.blog"}},launchWithNaverAppstorLayer:function(a,d,b,c){BlogAppLauncher.launch(a,d,b,c,true)},launch:function(a,h,b,g,f){var e=this._findAppLaunchLink(a,h,b,g);var b=this._initializeParams(b,"");var d=this._initializeParams(b.needDownLoadConfirm,"");var c=this._initializeParams(b.downLoadConfirmMsg,"");if(isSafariBrowser){AppLauncher.launch(BlogAppLauncher.CUSTOMTAG.IOS,e,d,c)}else{if(f==true){AppLauncher.launch(BlogAppLauncher.CUSTOMTAG.ANDROID,e,d,c,true)}else{AppLauncher.launch(BlogAppLauncher.CUSTOMTAG.ANDROID,e,d,c)}}},goStore:function(a){var a=this._initializeParams(a,"");var c=this._initializeParams(a.needDownLoadConfirm,"");var b=this._initializeParams(a.downLoadConfirmMsg,"");if(isSafariBrowser){AppLauncher.goStore(BlogAppLauncher.CUSTOMTAG.IOS,c,b)}else{AppLauncher.goStore(BlogAppLauncher.CUSTOMTAG.ANDROID,c,b)}},_findAppLaunchLink:function(b,f,d,e){b=this._initializeParams(b,"");f=this._initializeParams(f,"1");d=this._initializeParams(d,"");e=this._initializeParams(e,"'");var a=this._findSchemeParameter(b,f,d,e);if(isSafariBrowser){var c=this._getOS();if(c.version>=9){return"https://ul.blog.naver.com/launchApp/"+b+a}return"naverblog2://"+b+a}return"intent://"+b+a+"#Intent;scheme=naverblog2;action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;package=com.nhn.android.blog;end"},_findSchemeParameter:function(b,f,c,e){if(b==""){return""}var a="?version="+f;if(e!=""){a=a+"&blogId="+e}if(c!=""){delete c.scheme;delete c.host;delete c.version;delete c.blogId;delete c.blogID;for(var d in c){a=a+"&"+d+"="+c[d]}}return a},_initializeParams:function(b,a){if(b==null||typeof b=="undefined"){return a}return b},_getOS:function(){var c=navigator.userAgent;var e;var h=false;var f=false;var d=false;var g="";if(c.match(/iPad/i)||c.match(/iPhone/i)){h=true;e=c.indexOf("OS ")}else{if(c.match(/Android/i)){f=true;e=c.indexOf("Android ")}}if(h===true&&e>-1){var b=c.substring(e+3);var a=b.indexOf("_");g=parseInt(b.substring(0,a))}else{if(f===true&&e>-1){var b=c.substring(e+8);var a=b.indexOf(".");g=parseInt(b.substring(0,a))}}return{ios:h,iphone:d,android:f,version:g}}}});var BlogAppAdController=$Class({MESSAGES:{MESSAGE_TITLE:"블로그 앱을 써보세요!\n",NEWS:"내소식을 푸쉬 알림으로 바로 받을 수 있고 이웃 새글도 간편하게 볼 수 있습니다",BUDDY:"이웃들의 새글을 블로그앱으로\n편하게 받아보세요.",TEXT_ALIGN:"가운데정렬부터 대표사진설정까지!\n블로그앱의 강력한 글쓰기!\n지금, 체험해보세요.",COMMENT:"댓글, 답글의 푸쉬 알림을 바로 받을 수 있고 이웃 새글도 간편하게 볼 수 있습니다.",COMMENT_STICKER:"재미있는 라인 스티커로\n댓글쓰기가 더 즐거워져요!",GUESTBOOK:"댓글의 푸쉬 알림을 바로 받을 수 있고 이웃 새글도 간편하게 볼 수 있습니다.",GUESTBOOK_STAMP:"이웃 블로그에 간편하고 재미있는\n안부도장을 찍어보세요.",BLOGMAINIMAGE:"표지 사진 관리는 블로그 앱에서만 가능합니다.\n블로그앱으로 이동하시겠습니까?",LAUNCH_IOS:"블로그 추천하기는 블로그 앱에서만 가능합니다.\n블로그앱으로 이동하시겠습니까?",LAUNCH_ANDROID:"내블로그앱/이웃블로그앱은 블로그 앱에서만 설치 가능합니다.\n블로그앱으로 이동하시겠습니까?",MANAGEBUDDY:"블로그앱을 통해 블로그 추천하기 기능을 사용 할 수 있습니다.\n앱이 설치되어 있지 않은 경우\n다운로드 페이지로 이동합니다.",MODIFY_POST:"본문 수정은 앱에서만 가능합니다\n앱으로 이동하시겠습니까?",BLOG_HOME_EDIT:"홈편집은 블로그앱에서 가능합니다.\n블로그 앱으로 이동하시겠습니까?"},$init:function(){},start:function(){this._setEvent()},_setEvent:function(){$Fn(this._doLinkClick,this).attach($("ct"),"click");if($("cover")!=null){$Fn(this._doLinkClick,this).attach($("cover"),"click")}},_getAlertMessage:function(a){return this.MESSAGES.MESSAGE_TITLE+a},_getAlertMessageNoTitle:function(a){return a},_doLinkClick:function(b){var c=b.element;var a=$Element(cssquery.getSingle("!a",c)?cssquery.getSingle("!a",c):c);a=(a.tag=="span")?a.parent():a;a=(a.tag=="em")?a.parent():a;var d=paramUtil.getParam(a&&a.className()!=""?a.className():c.className);if(a.hasClass("_app_ad_btn")){switch(d[0]){case"postView":params={logNo:[d[1]],scheme:["postform"],version:["1"]};this._launchAppWithNaverAppstoreLayer("","postview","1",params,d[2]);b.stop();break;case"apppush":params={blogId:d[1],blogNo:d[2]};this._launchApp("이웃새글 앱알림 ON/OFF 기능은\n블로그앱에서만 가능합니다.\n앱을 실행하시겠습니까?","","1",params,gsBlogId);b.stop();break;case"blogmainimage":this._launchApp(this.MESSAGES.BLOGMAINIMAGE,"goblog","2",{checklogin:true},d[1]);b.stop();break;case"news":this._launchAppWithNaverAppstoreLayer(this.MESSAGES.MESSAGE_TITLE+this.MESSAGES.NEWS);b.stop();break;case"updateForm":if(typeof checkReadOnly!="undefined"&&checkReadOnly()){return}params={blogId:d[2],logNo:d[1],editorVersion:3};if(window.isInApp){this._launchApp("","updatepostform","2",params,d[2])}else{this._launchApp(this.MESSAGES.MODIFY_POST,"updatepostform","2",params,d[2])}b.stop();break;case"blogHomeEdit":confirmLayer(this.MESSAGES.BLOG_HOME_EDIT,function(){BlogAppLauncher.launch("goblog","2",{checklogin:true},d[1]);nclk(c,"ebc.edityes","","")},function(){nclk(c,"ebc.editno","","")});b.stop();break;case"blogHomeEditEnd":BlogAppLauncher.launch("bloghomeedit","1",{checklogin:true},d[1]);b.stop();break}}},_launchApp:function(b,a,e,c,d){if(b!=""){confirmLayer(b,function(){BlogAppLauncher.launch(a,e,c,d)})}else{BlogAppLauncher.launch(a,e,c,d)}},_launchAppWithNaverAppstoreLayer:function(b,a,e,c,d){if(b!=""){confirmLayer(b,function(){BlogAppLauncher.launchWithNaverAppstorLayer(a,e,c,d)})}else{BlogAppLauncher.launchWithNaverAppstorLayer(a,e,c,d)}}});var ScrapRedirect=$Class({$init:function(){if(scrapedInfo.logNo>0){$Element(window).attach("load",$Fn(function(a){$Fn(this.redirect,this).delay(0.2)},this).bind())}},redirect:function(){var a;if(!!scrapedInfo.nOpenType){a="내 블로그에 공유했습니다.\r확인하시겠습니까?"}else{a="내 블로그에 담았습니다.\r확인하시겠습니까?"}confirmLayer(a,function(){location.href="/"+userId+"/"+scrapedInfo.logNo})}});var scrapRedirect=new ScrapRedirect();var IframeUtil=$Class({resizeIfr:function(a,b){this.resizeIfrWithMargin(a,b,50)},resizeIfrWithMargin:function(d,j,g){var e,f,b,a;e=j||10;try{f=d.contentWindow.document}catch(c){return}if(f.location.href=="about:blank"){d.style.height=e+"px";return}if($Agent().navigator().ie&&$Agent().navigator().version<8){b=f.body.scrollHeight}else{a=f.body.appendChild($("<DIV>"));a.style.clear="both";b=a.offsetTop;a.parentNode.removeChild(a)}if(b<e){b=e}d.height=b+g;d.style.height=b+g+"px";e=f=b=a=null}});var iframeUtil=new IframeUtil();var cookie=$Cookie();var _inAppType=cookie.get("inAppType");if(_inAppType=="iOS"){nsc="iosapp.blog2ia"}else{if(_inAppType=="Android"){nsc="androidapp.blog2ia";if(navigator.userAgent&&navigator.userAgent.match(/.*Android[\s\/]{1}3\.[\w]{1}.*/)){var orgNclk=nclk;nclk=function(e,b,c,d){orgNclk(e,b,c,d,1)}}}else{nsc="Mblog.post"}}var CookieHolder=$Class({$static:{MOBILE_POST_WRITE_HEADER_BANNER:{KEY:"mPostWriteHeaderBanner",DURATION:365},MOBILE_POST_LIST_HEADER_BANNER:{KEY:"mPostListHeaderBanner",DURATION:365},MOBILE_POST_VIEW_FONT_SIZE_TYPE:{KEY:"mFont",DURATION:365},MOBILE_SE3_POST_VIEW_FONT_SIZE_TYPE:{KEY:"mSe3Font",DURATION:365},CLOSE_TEMPPOSTLIST_NOTICE_LAYER:{KEY:"cTNL",DURATION:365},CLOSE_COMMENTROS_NOTICE:{KEY:"cros",DURATION:1},CLOSE_MAGAZINEVIEW_PROMOTION_LAYER:{KEY:"cmpl",DURATION:0}}});var TripleSRequester=$Class({request:function(e,g,a,f,c){if(!c){c=true}var d="/BlogTripleSUpdateAsync.nhn";var b={key:e,value:g};this._doAjax(d,b,a,f,c)},requestWithUid:function(f,e,h,a,g,c){if(!c){c=true}var d="/BlogTripleSUpdateAsync.nhn";var b={uid:f,key:e,value:h,useUid:"true"};this._doAjax(d,b,a,g,c)},requestWithUidAndSubKey:function(f,h,j,g,e,b,d){if(!d){d=true}var c="/BlogTripleSUpdateWithSubKeyAsync.nhn";var a={uid:f,key:h,subKey:j,value:g,useUid:"true"};this._doAjax(c,a,e,b,d)},_doAjax:function(d,c,a,f,b){var e=$Ajax(d,{async:b,method:"post",onload:a,onerror:f});e.request(c)}});var tripleSRequester=new TripleSRequester();var OpenGraphLinkVideoExecutor=function(a){var f=a;var e=function(){var g=$$("a._ogvideo");if(g==null||g.length==0){return}for(var h=0;h<g.length;h++){var j=g[h];$Fn(b).attach(j,"click")}};var b=function(l){var h=$Element(l.element).query("! a._ogvideo")||l.element;var g=$Element(h);var j=g.attr("_embedUrl");if(j==null){return}var n=d(j);if(n==null){return}var m=g.query("! div.thumb");if(m==null){return}l.stop();var k=$Element(m);if(k.hasClass("s_size")){k.removeClass("s_size");k.addClass("b_size")}n.execute(k,j,f)};var d=function(h){for(var g in c){if(!c.hasOwnProperty(g)){continue}var j=c[g];if(j.matching(h)){return j}}};var c={youtube:{execute:function(l,m){var k=l.width();var g=l.height();var n=$Element(l.query("img"));var j=n.attr("src");j=j.replace(/type=f[_\d]+/,"");var h=$Element("<div style='position:relative;width:100%'><img class='_hiddenimg' src='"+j+"type=f560_336' style='width:100%;visibility:hidden'/><iframe src='"+m+"?autoplay=1&autohide=1' frameborder='0' style='position:absolute;top:0;left:0;width:100%;height:100%' allowfullscreen/></div>");l.hide();l.after(h);$Fn(function(){if(f&&typeof f=="function"){f()}}).attach(h.query("._hiddenimg"),"load")},matching:function(g){return/https:\/\/www\.youtube\.com\/embed\/[^\/]+/.test(g)}}};return{init:e}};var LocalStorage=$Class({$init:function(b,a){if(typeof b=="undefined"||b==null){throw new Error("LocalStorage must defined key")}this.storage=this._initStorage();this.key=b;this.size=(typeof(a)=="undefined"||a==null||a<0)?0:a},readSet:function(){var a=this.getItem();if(typeof(a)=="undefined"||a==null){a=[]}return a},addSet:function(b){var a=this.readSet();if(this.size>0&&a.length>=this.size){a.shift()}if(a.indexOf(b)<0){a.push(b)}this.setItem(a)},getItem:function(){var a=this.storage.getItem(this.key);if(typeof(JSON)=="object"&&typeof(JSON.parse)=="function"){return JSON.parse(a)}else{return jindo.$Json(a).toObject()}},setItem:function(b){var a;if(typeof(JSON)=="object"&&typeof(JSON.stringify)=="function"){a=JSON.stringify(b)}else{a=jindo.$Json(b).toString()}this.storage.setItem(this.key,a)},removeItem:function(){this.storage.removeItem(this.key)},_initStorage:function(){if(this._isStorageAvailable(window.localStorage)){return window.localStorage}else{if(this._isStorageAvailable(window.sessionStorage)){return window.sessionStorage}else{return new FakeStorage()}}},_isStorageAvailable:function(d){var a="___persist___";if(!d){return}var b="__tmp__"+a;try{d.setItem(b,a)}catch(c){return false}return d.getItem(b)===a}});var FakeStorage=$Class({$init:function(){this.fakeStorage={}},getItem:function(a){return this.fakeStorage[a]||null},setItem:function(a,b){return this.fakeStorage[a]=b},removeItem:function(a){if(this.fakeStorage[a]){delete this.fakeStorage[a]}}});var BuddyRecommendService=$Class({$init:function(){this.storage=new LocalStorage("no.buddy.recommend.id",10000)},addNotBuddyRecommendId:function(a){if(a==null||a==""){return}this.storage.addSet(a)},isNotBuddyRecommendId:function(a){if(a==null||a==""){return true}var b=this.storage.readSet();return b.indexOf(a)>=0}});var BuddyRecommendHandler=$Class({$init:function(){this.buddyRecommendService=new BuddyRecommendService();if(this.buddyRecommendService.isNotBuddyRecommendId(blogId)){return}this.elLayer=$Element($$.getSingle("._buddyRecommendationLayer"));this._bLongElapsedRecommend=false;if(!this.elLayer){return}this._setEvents()},_setEvents:function(){$Fn(this._cancelRecommend,this).attach($$("._cancelBuddyRecommendation"),"click");$Fn(this._addBuddy,this).attach($$("._add_buddy_by_recommendation"),"click");setTimeout($Fn(function(){this._fadeOutLayer()},this).bind(),6000)},notify:function(a){this._bLongElapsedRecommend=a;this._showLayer()},_showLayer:function(){if(this.buddyRecommendService.isNotBuddyRecommendId(blogId)){return}this._fadeInLayer()},_addBuddy:function(a){if(this._bLongElapsedRecommend){nclk(this,"adf.miadd","","")}else{nclk(this,"adf.seadd","","")}if(bLoginUser==false){confirmLayer("로그인하시겠습니까?",function(){if(typeof(postViewController)!=="undefined"&&navigator.userAgent.indexOf("NAVER")>-1&&$Element($$.getSingle("._buddyRecommendationLayer")).css("display")==="block"){postViewController.timerStop()}loginUtil.login()})}else{buddyController.goBuddyAddForm({blogId:blogId,mobileBuddyAddMessageType:"",url:"/BuddyAddForm.nhn",subDirectoryKey:""})}a.stop()},_cancelRecommend:function(){if(this._bLongElapsedRecommend){nclk(this,"adf.micancel","","")}else{nclk(this,"adf.secancel","","")}this.buddyRecommendService.addNotBuddyRecommendId(blogId);this._fadeOutLayer()},_fadeInLayer:function(){if(!this.elLayer){return}this.elLayer.removeClass("fade_out");this.elLayer.addClass("fade_in")},_fadeOutLayer:function(){if(!this.elLayer){return}this.elLayer.removeClass("fade_in");this.elLayer.addClass("fade_out")}});var PostViewVisitRecord=$Class({$init:function(){this._storage=new LocalStorage("postview.visit.record",2);this._isRecommendedBlog=false;this._isLongElapsedRecommend=false},record:function(d,c,a){var b=this._getRecords();if(b.secondView.logNo!=c){b.firstView=b.secondView}b.secondView={blogId:d,logNo:c,elapsed:a};this._storage.setItem(b)},_getRecords:function(){return this._storage.getItem()||{firstView:{logNo:"",blogId:"",elapsed:0},secondView:{logNo:"",blogId:"",elapsed:0}}},checkRecommendBlog:function(e,c){var b=this._getRecords();var d=b.firstView;var a=b.secondView;if(d.logNo==c||a.logNo==c){this._isRecommendedBlog=false;return}if(a.blogId==e&&a.elapsed>5*60*1000){this._isRecommendedBlog=true;this._isLongElapsedRecommend=true;return}if(d.blogId==e&&a.blogId==e&&d.elapsed<=5*60*1000&&a.elapsed>10*1000){this._isRecommendedBlog=true;this._isLongElapsedRecommend=false;return}this._isRecommendedBlog=false},isRecommendedBlog:function(){return this._isRecommendedBlog},isLongElapsedRecommend:function(){return this._isLongElapsedRecommend}});var PostViewVisitRecordHandler=$Class({$init:function(b,a,c){this.activate();if(!this._isActivated){return}this._postViewVisitRecord=c;this._initPostValue(b,a);this._setEvents();this.timerStart()},_initPostValue:function(b,a){this._blogId=b;this._logNo=a},_setEvents:function(){var a=$Agent().os();if(a.ios||a.android){$Fn(this.timerStop,this).attach(window,"pagehide")}else{$Fn(this.timerStop,this).attach(window,"beforeunload")}},postChange:function(b,a){if(!this._isActivated){return}this.timerStop();this._initPostValue(b,a);this.timerStart()},timerStart:function(){if(!this._isActivated){return}this._startTime=+new Date},timerStop:function(){if(!this._isActivated){return}this._stopTime=+new Date;this._save()},_save:function(){this._postViewVisitRecord.record(this._blogId,this._logNo,this._stopTime-this._startTime)},activate:function(){if(location&&location.search&&location.search.indexOf("noRecord=true")>0){this._isActivated=false}else{this._isActivated=true}}});var PostViewVisitTimeRecord=$Class({$init:function(){this._storage=new LocalStorage("postview.visitTime.record",1000)},record:function(c,b,e,a){var d={blogId:c,buddyBlogId:b,viewDate:e,elapsedTime:a};this._storage.addSet(d)},read:function(){return this._storage.readSet()},remove:function(){this._storage.removeItem()},sendVisitTime:function(){var b=this.read();var a=$Json(b).toString();new $Ajax("/rego/BetterFeedVisitTimeRecord.nhn",{method:"POST",async:false}).request({visitTimeList:a});this.remove()}});var PostViewVisitTimeRecordHandler=$Class({$init:function(c,b,a){this._postViewVisitTimeRecord=a;this._initValue(c,b);this._setEvents();this.timerStart()},_initValue:function(b,a){this._blogId=b;this._buddyBlogId=a;this._viewDate=this._dateToYYYYMMDD()},_dateToYYYYMMDD:function(){var b=new Date();var c=b.getMonth()+1;var a=b.getDate();return[b.getFullYear(),(c>9?"":"0")+c,(a>9?"":"0")+a].join("")},_setEvents:function(){var a=$Agent().os();if(a.ios||a.android){$Fn(this.timerStop,this).attach(window,"pagehide")}else{$Fn(this.timerStop,this).attach(window,"beforeunload")}},sendVisitTime:function(){this._postViewVisitTimeRecord.sendVisitTime()},timerStart:function(){this._startTime=parseInt(+new Date/1000)},timerStop:function(){this._stopTime=parseInt(+new Date/1000);this._save()},_save:function(){this._postViewVisitTimeRecord.record(this._blogId,this._buddyBlogId,this._viewDate,this._stopTime-this._startTime)}});var NoticePostHandler=$Class({htAPI:{remove:"/rego/NoticePostRemoveAsync.nhn",add:"/rego/NoticePostAddAsync.nhn",getCount:"/rego/NoticePostCountAsync.nhn"},$init:function(){},remove:function(e){var d=e[0];var b=e[1];var a=e[2];if(a=="false"){var c=this;confirmLayer("이 공지를 내리시겠습니까?",function(){c._remove(d,b)})}},_remove:function(b,a){var d={blogId:b,logNo:a};var c=new $Ajax(this.htAPI.remove,{method:"POST",onerror:function(){},onload:$Fn(function(f){var e=f.json();if(e==true){alertLayer("이 포스트를 공지에서 내렸습니다.",function(){location.reload(true)})}else{alertLayer("공지 내리기에 실패 하였습니다.")}},this).bind()});c.request(d)},add:function(e){var c=e[0];var b=e[1];var a=this._getCount(c);if(a>=gnMaxNoticePostCount){alertLayer("공지는 최대 "+gnMaxNoticePostCount+"개까지 등록하실 수 있습니다.\n이 포스트를 공지로 등록하시려면 기존 공지를 내리고 등록해주세요.");return}var f={blogId:c,logNo:b};var d=new $Ajax(this.htAPI.add,{method:"POST",onerror:function(){},onload:$Fn(function(h){var g=h.json();if(g==true){alertLayer("포스트가 공지로 등록되었습니다.",function(){location.reload(true)})}else{alertLayer("공지 등록에 실패 하였습니다.")}},this).bind()});d.request(f)},isExceedNoticePostCount:function(){var a=this._getCount(blogId);return a>=gnMaxNoticePostCount},alertExceedNoticePostCount:function(){alertLayer("공지는 최대 "+gnMaxNoticePostCount+"개까지 등록하실 수 있습니다.\n이 포스트를 공지로 등록하시려면 기존 공지를 내리고 등록해주세요.")},createFlicking:function(){if(!$("mflick2")){return}var c=true;if($Agent().navigator().chrome){if(navigator.userAgent.indexOf("Version/")==-1){c=false}}var b=new jindo.m.SlideFlicking("mflick2",{bUseCircular:false,nDefaultIndex:0,nFlickThreshold:70,sClassPrefix:"noticeflick-",bUseTimingFunction:c});var a=new IndicatorController();a.start($$("#mflick2 .each_notice").length,0,"_notice_indicator",false);b.attach({beforeFlicking:function(d){if(d.bNext){a.next()}else{a.prev()}}})},_getCount:function(b){var a=0;var d={blogId:b};var c=new $Ajax(this.htAPI.getCount,{method:"POST",onerror:function(){},onload:$Fn(function(e){a=e.json()},this).bind(),async:false});c.request(d);return a}});var NaverTranslationHandler=$Class({$init:function(){},goTrans:function(){if(typeof NaverTranslator!="undefined"&&typeof NaverTranslator.TransNavigation!="undefined"){NaverTranslator.TransNavigation.open();return}this._initScript()},closeTransLayer:function(){if(typeof NaverTranslator!="undefined"&&typeof NaverTranslator.TransNavigation!="undefined"){NaverTranslator.TransNavigation.close();return}},_initScript:function(){var b="viewTypeSelector";var a=$$.getSingle(".__se_component_area");if(a){b=".__se_component_area"}var d={service_code:"naver_blog_mobile",source_language:"",target_language:"",target_contents:b,original_box:"on",navigation_box:"on",navigation_skin:"mobile01",navigation_style:"position:absolute; top:30%; z-index: 99999;",repeat_translate:"off",auto_start:"off",toggle_button:""};sessionStorage.setItem("_trans_callback",lazyViewLoadForCallback);var c=window.location.href.indexOf("https")==0?"https":"http";var f=document.createElement("script");f.id="NaverTranslator-seeds";f.charset="utf-8",f.setAttribute("src",c+"://app.translate.naver.net/js/NaverTranslator.js?svc_code="+d.service_code+"&src_lang="+d.source_language+"&tar_lang="+d.target_language+"&tar_cont="+d.target_contents+"&open_layer="+d.original_box+"&navigation_box="+d.navigation_box+"&navigation_skin="+d.navigation_skin+"&navigation_style="+d.navigation_style+"&repeat="+d.repeat_translate+"&auto_start="+d.auto_start+"&toggle_button="+d.toggle_button+"&"+Date.parse(new Date));var e=document.createElement("div");e.className="g_dimmed _g_dimmed";e.style.display="block";document.body.appendChild(e);document.body.appendChild(f)}});var BlogTeamBuddyRecommendHandler=$Class({$init:function(){this._showLayerIfNecessary()},_setEvents:function(){$Fn(this._cancelRecommend,this).attach($$("._cancle_blogteam_buddy"),"click");$Fn(buddyController.doClick,buddyController).attach($$("._add_blogteam_buddy"),"click")},_showLayerIfNecessary:function(){var c=gUrlMap.FirstWriterRecommendBuddyCheckAsync;var b={blogId:blogId,buddyId:"blogpeople"};var a=this;var d=$Ajax(c,{onload:function(f){var e=f.json();if(e.result&&e.result.isShowLayer){a._showLayer(e.result.buddyProfileImage)}}});d.request(b)},_showLayer:function(b){$Element("body").css({overflow:"hidden",width:"100%",height:"100%"});var c=$Template("recommend_blogteam");var a=$Element("blogTeamBuddyRecommendationLayer");a.html(c.process({profileImageUrl:b}));a.show();this._setEvents()},_hideLayer:function(){$Element("blogTeamBuddyRecommendationLayer").hide();$Element("body").css("overflow","visible")},_cancelRecommend:function(a){this._hideLayer();a.stop()}});var userAgentUtil={isIPadRequest:function(){if((typeof isRequestFromIPad=="undefined")||isRequestFromIPad==null){return false}if(isRequestFromIPad!=true){return false}return true},isFirefoxRequest:function(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("firefox")>-1){return true}else{return false}},isChromeRequest:function(){if(/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)){return true}else{return false}},isFlashWidgetBrowser:function(){var c=!!(window.opera);var b=navigator.userAgent;var d=!c&&/MSIE/.test(b);if(!d){return false}/MSIE ([0-9\.]+)/.exec(b);var a=parseFloat(RegExp.$1);return a<10},isNotSupportBrowser:function(){var c=!!(window.opera);var b=navigator.userAgent;var d=!c&&/MSIE/.test(b);if(!d){return false}/Trident\/([0-9\.]+)/.exec(b);if(RegExp.length<=0){return false}var a=parseFloat(RegExp.$1);return a<5}};var serviceId="naver_blog";var hitType="cv";var nilForBlogCVAnalyst=$Class({$init:function(c,b,d,k,f,h,g,e,j,a){this._blogId=c;this._uri=b;this._relationType=+d;this._gdid=k;this._dimension_1=f;this._referrer=h;this._referrerSet();this._optional_1=g;this._event_category=e;this._statAllowSet();this._relationTypeSet();this._isPostList=j;this._isNilAnalystLeaveEvent=a;if(this._relationType!="3"){this._start()}},_start:function(){nil.init(serviceId,this._blogId);nil.setDevMode(nilOptions.devMode);nil.add({gdid:this._gdid,dimension_1:this._dimension_1,optional_1:this._optional_1,referrer:this._referrer,uri:this._uri,user_type:this._relationType,hit_type:hitType});nil.send(hitType,this._event_category);this._leave()},_leave:function(){var a=this._event_category.indexOf("post_view")<0||this._isPostList;if(this._isNilAnalystLeaveEvent!=="true"){return}if(a){return}this._attachLeaveEvent()},_attachLeaveEvent:function(){var a=$Agent().os();if(a.ios||a.android){$Fn(this._leaveEvent).attach(window,"pagehide")}else{if(userAgentUtil.isChromeRequest()||userAgentUtil.isFirefoxRequest()){$Fn(this._leaveEvent).attach(window,"beforeunload")}else{$Fn(this._leaveEvent).attach(window,"unload")}}},_leaveEvent:function(){nil.send("leave")},_relationTypeSet:function(){switch(this._relationType){case 0:this._relationType="3";break;case 1:this._relationType="2";break;case 2:this._relationType="1";break;default:this._relationType="0"}},_statAllowSet:function(){if(this._optional_1==true){this._optional_1="1"}else{this._optional_1="0"}},_referrerSet:function(){if(this._referrer.indexOf("proxyReferer=")>-1){var a=(this._referrer).match(/proxyReferer=([^&]*)/);if(a&&a[0]){this._referrer=decodeURIComponent(a[1])}}}});!function(){function ax(c){q&&q(c);var a;if("http:"!=Z.protocol&&"https:"!=Z.protocol){return !1}a=Z.protocol;var d=H?"dev."+Q:Q,b=new Image(1,1);return b.src=a+"//"+d+c,!0}function ai(){var b=[],a=-1;for(var c in W){b[++a]=c+"="+ar(W[c])}for(c in ae){b[++a]=c+"="+ar(ae[c])}return b[++a]="t="+(new Date).getTime(),b.join("&")}function an(c){var b=c.length;if(b<1){return 0}var d=c[0];switch(d){case"cv":aa=(new Date).getTime(),ak("cv",c[1],"","",""),ao(c[2],c[3]);break;case"leave":var a=aB();if(a<=0){return 0}ak("event","action","leave","",""+a),ao(c[5],c[6]),aa=null;break;case"event":ak("event",c[1],c[2],c[3],c[4]),ao(c[5],c[6]);break;case"relay":ak("relay",c[1],c[2],c[3],c[4]),ao(c[5],c[6])}return 1}function ak(f,c,g,d,b){ae.h=f||"",ae.ec=c||"",ae.ea=g||"",ae.el=d||"",ae.ev=b||""}function aB(){return null===aa?0:(new Date).getTime()-aa}function at(a){return"object"==typeof a}function am(a){return"string"==typeof a}function az(){W={},ae={}}function ah(b,a){var c=X.referrer?X.referrer:"";W.s=b,W.c=a,W.r=c}function ap(){var b;try{b=G.userLanguage||G.language||""}catch(a){}W.l=b,W.v=K}function aw(){var a=ay("og:url","content");a||(a=Z.href?Z.href:""),W.u=a,aj()}function ag(b){var a={};return b.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(f,g,d,c){a[g]=c}),a}function aj(){var f=window.location.search,c=ag(f),g={cds:"cd_source",cdt:"cd_type",cdc:"cd_contents",cdv:"cd_value"};for(var d in g){var b=g[d];d in c&&c[d]&&al(W,b,c[d])}}function ay(c,a){for(var d=document.getElementsByTagName("meta"),b=0;b<d.length;b++){if(d[b].getAttribute("property")===c){return d[b].getAttribute(a)}}}function av(a){an(a)&&(ax(ai()),ae={})}function ao(b,a){if(at(b)){for(var c in b){am(b[c])?al(W,c,b[c]):V[c]&&typeof b[c]==V[c]&&al(W,c,b[c].toString())}}am(b)&&am(a)&&al(W,b,a)}function al(h,m,f){var b={referrer:"r",gdid:"m",uri:"u",user_type:"f",cd_source:"cds",cd_type:"cdt",cd_contents:"cdc",cd_value:"cdv"};if(m in b){h[b[m]]=f}else{var k=m.split("_"),g=k.pop();if(!g.search(/0-9+/)){return}var d=k.join("_"),j={dimension:{limit:10,key:"d"},metric:{limit:10,key:"m"},optional:{limit:10,key:"o"},extra:{limit:10,key:"e"}};if(!(d in j)){return}var l=parseInt(g);if(l>j[d].limit){return}h[j[d].key+g]=f}}function aC(b,a){az(),ah(b,a),ap(),aw()}function au(a){q=a}function af(a){H=a}function ad(a){Q=a+"/m?"}function F(){var w=ag(window.location.search),C=w.NaPm;if(null!=C){for(var j=decodeURIComponent(C),b=j.split("|"),A={},m=0;m<b.length;m++){var h=b[m].split("=");2==h.length&&(A[h[0]]=h[1])}for(var y=A.tr,B=["sa","pla","ft","cd","brnd","pwrcnt"],k=!1,m=0;m<B.length;m++){var v=B[m];y==v&&(k=!0)}if(0!=k&&null!=A.ct&&""!=A.ct&&null!=A.ci&&""!=A.ci){var D=Math.round((new Date).getTime()/1000),x=btoa(Y({t:D,ct:A.ct,ci:A.ci,u:W.u,r:W.r})),p=C;aA("NA_SA",x,1728000),aA("NA_PM",p,1728000)}}}function Y(c){var a=[];for(var d in c){var b=encodeURIComponent(c[d]);a.push(d+"="+b)}return a.join("|")}function L(f){for(var c=f.split("|"),g={},d=0;d<c.length;d++){var b=c[d].split("=");2==b.length&&(g[b[0]]=decodeURIComponent(b[1]))}return g}function z(p){var C=p;if(null==p){return C}var h,b=/{NaPm}/i,y=/%7BNaPm%7D/i;if(b.test(p)){h=b}else{if(!y.test(p)){return C}h=y}var k=ab("NA_PM"),g="";k&&0==p.indexOf("http")&&(g="NaPm="+k),C=p.replace(h,g);var x=ab("NA_SAC"),B=ab("NA_SA"),j=document.cookie.replace(/(?:(?:^|.*;\s*)NNB\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(""!=x){var m=L(atob(x));if(m.u==W.u&&m.r==W.r){return C}}if(null==B||""==B){return C}var A=L(atob(B)),D=Y({ci:A.ci,t:A.t,u:A.u,r:A.r,cnvType:"5",cnvValue:"1",c_t:Math.round((new Date).getTime()/1000),c_u:W.u,c_r:W.r,isDirect:"DC",wa:"b_"+W.c,nnb:j}),w=btoa(Y({u:W.u,r:W.r}));return aA("NA_SAC",w,1800),ao("extra_1",D),av(["relay","sa"]),delete W.e1,C}function aA(p,C,h){if(aq()){var b=1000;if(localStorage.length>=b){for(var y=localStorage.length,k=[],g=0;g<y;g++){var x=localStorage.key(g);if(0==x.indexOf(ac)){var B=localStorage.getItem(x);try{var j=JSON.parse(B);j.expire&&j.expire<(new Date).getTime()&&k.push(x)}catch(m){continue}}}for(var g=0;g<k.length;g++){var A=k[g];localStorage.removeItem(A)}}if(!(localStorage.length>=b)){var D=new Date;D.setTime(D.getTime()+1000*h);var x=ac+":"+p+":"+W.c,w={value:C,expire:D.getTime()};localStorage.setItem(x,JSON.stringify(w))}}}function ab(f){if(!aq()){return""}try{var c=ac+":"+f+":"+W.c,g=localStorage.getItem(c),d=JSON.parse(g);return d.expire&&d.expire<(new Date).getTime()?(localStorage.removeItem(c),""):d.value}catch(b){return""}}function aq(){var c="localStorage";try{var a=window[c],d="__storage_test__";return a.setItem(d,d),a.removeItem(d),!0}catch(b){return b instanceof DOMException&&(22===b.code||1014===b.code||"QuotaExceededError"===b.name||"NS_ERROR_DOM_QUOTA_REACHED"===b.name)&&0!==a.length}}var W={},ae={},K="1.0.7",G=window.navigator,Z=window.location,X=document,ar=(X.referrer,encodeURIComponent),Q=(window.java||self.java?java.awt.Toolkit.getDefaultToolkit():null,"nil.naver.com/m?"),H=!1,q=null,aa=null,V={cd_value:"number"},ac="niStorage";"undefined"==typeof nil&&(nil={}),nil.init=function(b,a){aC(b,a)},nil.add=function(b,a){ao(b,a)},nil.send=function(){av(arguments)},nil.callback=function(a){au(a)},nil.setDevMode=function(a){af(a)},nil.setTargetDomain=function(a){ad(a)},nil.send=function(b){function a(){b.apply(this,arguments),F()}return a}(nil.send),nil.send_sa_log=z}();var PhotoViewerHandler=$Class({_domainRegExp:/^(((http(s?))\:\/\/)?)(www\.)?(\w|\d)+.+?\//ig,$init:function(){},showPhotoViewer:function(m){var n=$("_photo_view_property");var g={};try{g=JSON.parse(n.getAttribute("attachImagePathAndIdInfo"))}catch(j){}var c=this._getImageUri(m);var d=g[c];if(!d){location.href=m}else{var h=n.getAttribute("blogId");var a=n.getAttribute("logNo");var k=gUrlMap.PhotoViewer;var l=location.protocol+"//"+location.host+"/PostView.nhn?blogId="+h+"&logNo="+a;var f="http://"+k+"/blog?listUrl="+encodeURIComponent(l)+"&imgId="+d+"&host="+encodeURIComponent(location.protocol+"//"+location.host+"/photoviewer")+"&historyBack=true&blogId="+h+"&logNo="+a;if(n.getAttribute("editorversion")==3&&$$.getSingle(".se_documentTitle .se_background_img")){var b=this._getImageUri($$.getSingle(".se_background_img").getAttribute("src"));if(!!g[b]){f=f+"&titleImageId="+g[b]}}location.href=f}},_getImageUri:function(b){var a="/"+b.replace(this._domainRegExp,"");a=a.substring(0,a.lastIndexOf("/"));return a}});var popupLayer=function(a){var b="_popupLayer";if(document.getElementById(b)){return}var e=a.title;var j=a.message;var c=a.buttonList;var g="";for(i=0;i<c.length;i++){g+='<a href="#" class="'+c[i].className+'" id="_popupLayerGo'+i+'">'+c[i].title+"</a>"}var h=['<div class="g_dimmed _g_dimmed" style="display: block;"></div>','<div class="lyr_popup" id="lyr1" style="display: block;">','<div class="lyr_cont lyr_alert">','<div class="txt_area">','<strong class="tit">',e,"</strong>",'<p class="dsc">',j,"</p>","</div>",'<div class="btn_area">',g,"</div>","</div>","</div>"].join("");var f=document.createElement("div");f.id=b;f.innerHTML=h;document.body.appendChild(f);var d=document.getElementById(b);for(i=0;i<c.length;i++){(function(l){var m=c[l];var k=document.getElementById("_popupLayerGo"+l);k.addEventListener("click",function(n){n.preventDefault();d.parentNode.removeChild(d);enableTouchEvent();m.action()},false)})(i)}disableTouchEvent()};var confirmLayer=function(k,a,h,d){var c="_confirmLayer";if(document.getElementById(c)){return}if(d){d.blur()}var j=['<div class="g_dimmed _g_dimmed" style="display: block;"></div>','<div class="lyr_popup" id="lyr4" style="">','<div class="lyr_cont lyr_alert">','<div class="txt_area">','<p class="dsc">',k,"</p>","</div>",'<div class="btn_area">','<a href="#" class="btn_50" id="_confirmLayercancel">취소</a>','<a href="#" class="btn_50 green" id="_confirmLayerOk">확인</a>',"</div>","</div>","</div>"].join("");var e=document.createElement("div");e.id=c;e.innerHTML=j;document.body.appendChild(e);var f=document.getElementById("_confirmLayerOk");var b=document.getElementById("_confirmLayercancel");var g=document.getElementById(c);f.addEventListener("click",function(l){l.preventDefault();enableTouchEvent();g.parentNode.removeChild(g);if(!a){return}a()},false);b.addEventListener("click",function(l){l.preventDefault();enableTouchEvent();g.parentNode.removeChild(g);if(!h){return}h()},false);disableTouchEvent()};var alertLayer=function(f,e,d){var a="_alertLayer";if(document.getElementById(a)){return}if(d){d.blur()}var b=['<div class="g_dimmed _g_dimmed" style="display: block;"></div>','<div class="lyr_popup" id="lyr6" style="display: block;">','<div class="lyr_cont lyr_alert">','<div class="txt_area"><p class="dsc">',f,"</p></div>",'<div class="btn_area"><a href="#" class="btn_100" id="_alertLayerClose">닫기</a></div>',"</div>","</div>"].join("");var g=document.createElement("div");g.id=a;g.innerHTML=b;document.body.appendChild(g);var c=document.getElementById("_alertLayerClose");var h=document.getElementById(a);c.addEventListener("click",function(j){j.preventDefault();enableTouchEvent();h.parentNode.removeChild(h);if(!e){return}e()},false);disableTouchEvent()};var alertLayerClose=function(){var a=document.getElementById("_alertLayer");if(!a){return}enableTouchEvent();a.parentNode.removeChild(a)};var promptLayer=function(l,f,c,h){var e="_promptLayer";if(document.getElementById(e)){return}var j=['<div class="g_dimmed _g_dimmed" style="display: block;"></div>','<div class="lyr_popup" id="lyr8" style="">','<div class="lyr_cont lyr_alert">','<div class="copy_url">','<p class="dsc">',l,"</p>",'<input typy="text" id="_promptLayerInput" class="url" value="" onfocus="this.setSelectionRange(0,this.value.length);">',"</div>",'<div class="btn_area">','<a href="#" class="btn_50" id="_promptLayerCancel">취소</a>','<a href="#" class="btn_50 green" id="_promptLayerOk">확인</a>',"</div>","</div>","</div>"].join("");var k=document.createElement("div");k.id=e;k.innerHTML=j;document.body.appendChild(k);var b=document.getElementById("_promptLayerOk");var a=document.getElementById("_promptLayerCancel");var d=document.getElementById("_promptLayerInput");var g=document.getElementById(e);if(f!=""){d.value=f}b.addEventListener("click",function(n){n.preventDefault();var m=d.value;g.parentNode.removeChild(g);enableTouchEvent();if(!c){return}c(m)},false);a.addEventListener("click",function(m){m.preventDefault();g.parentNode.removeChild(g);enableTouchEvent();if(!h){return}h()},false);disableTouchEvent();d.focus()};var handleEvent=function(a){a.preventDefault()};var disableTouchEvent=function(){document.addEventListener("touchmove",handleEvent)};var enableTouchEvent=function(){document.removeEventListener("touchmove",handleEvent)};(function(f){var h,d,g=f.document;if(typeof BMR==="undefined"){BMR={}}if(BMR.v){return}h={v:"t5",cN:"BMR=",bU:"",aL:function(a,b){if(f.addEventListener){f.addEventListener(a,b,false)}else{if(f.attachEvent){f.attachEvent("on"+a,b)}}},sT:function(){h.sC({s:new Date().getTime(),r:g.URL.replace(/#.*/,""),r2:g.referrer.replace(/#.*/,"")})},eU:function(a){return encodeURIComponent(a)},sC:function(b){var a="",c;for(c in b){if(b.hasOwnProperty(c)){a+="&"+h.eU(c)+"="+h.eU(b[c])}}a=a.replace(/^&/,"");g.cookie=h.cN+a+"; path=/; domain="+f.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase()},gC:function(){var c,e=g.cookie+";",l,m,a,b={};if(!((c=e.indexOf(h.cN))>=0)){return null}c+=h.cN.length;l=e.substring(c,e.indexOf(";",c)).split("&");if(l.length===0){return null}for(c=0,m=l.length;c<m;c++){a=l[c].split("=");a.push("");b[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return b},run:function(a){if(!a){return}var b=function(){if(h.sT){h.sT.call()}h.sT=null};h.bU=a;if("onpagehide" in f){h.aL("pagehide",b)}else{h.aL("unload",b);h.aL("beforeunload",b)}h.aL(("onpageshow" in f)?"pageshow":"load",function(){h.done.call()})},done:function(){var c,e,j=g.URL.replace(/#.*/,""),a=r2=g.referrer.replace(/#.*/,""),b=h.gC();h.sC({});if(b!=null){a=b.r;if(a==r2&&(a!=b.r2||a!=j)){e=new Date().getTime()-parseInt(b.s,10);j=h.bU+"?v="+h.v+"&t="+e+"&u="+h.eU(j)+"&r="+h.eU(a);(new Image()).src=j}}}};for(d in h){if(h.hasOwnProperty(d)){BMR[d]=h[d]}}}(window));var MobileHappyBeanPopUpHelper={init:function(b,a){MobileHappyBeanPopUpHelper.popupLayerId="mobileHappyBeanPopUpLayer";MobileHappyBeanPopUpHelper.popupTemplateId="mobileHappyBeanPopUpTpl";MobileHappyBeanPopUpHelper.disableScroll();MobileHappyBeanPopUpHelper.showLayer(b,a)},showLayer:function(b,a){this.mobileHappyBeanPopUpTpl=$Template(MobileHappyBeanPopUpHelper.popupTemplateId);var d=document.getElementById(MobileHappyBeanPopUpHelper.popupLayerId);var c=$Element(d);c.html(this.mobileHappyBeanPopUpTpl.process({imageUrl:b,linkUrl:a}));d.style.display=""},closePopUpLayer:function(a){MobileHappyBeanPopUpHelper.enableScroll();MobileHappyBeanPopUpHelper.setBannerShowLogNo(a);var b=document.getElementById(MobileHappyBeanPopUpHelper.popupLayerId);if(!b){return}b.style.display="none"},handleEvent:function(a){a.preventDefault()},disableScroll:function(){window.document.body.style.overflow="hidden";window.document.body.style.position="fixed"},enableScroll:function(){window.document.body.style.overflow="";window.document.body.style.position=""},setBannerShowLogNo:function(a){localStorage.setItem("show.banner.logNo",a)},isBannerNotShown:function(a){var b=localStorage.getItem("show.banner.logNo");if(a==b){return false}return true},inAppHappyBeanLayerCall:function(b,a){if(!isInApp){return}SubmitUtil.submitUsingIframe(gInAppUrl+"/showPopupHappyBean",{imageUrl:b,linkUrl:a},"get")}};if(typeof(window.defineNHNJS)=="undefined"){window.defineNHNJS={}}window.defineNHNJS["LegoPostView-1873117535_js"]=true;
